<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lindsay Poirier">

<title>Lab 10: APIs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<link rel="stylesheet" href="../css/custom.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">SDS 192: Introduction to Data Science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../assignments.html"> 
<span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../labs.html"> 
<span class="menu-text">Labs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#learning-goals" id="toc-learning-goals" class="nav-link" data-scroll-target="#learning-goals">Learning Goals</a></li>
  </ul></li>
  <li><a href="#review-of-key-terms" id="toc-review-of-key-terms" class="nav-link" data-scroll-target="#review-of-key-terms">Review of Key Terms</a></li>
  <li><a href="#nyc-311-service-requests" id="toc-nyc-311-service-requests" class="nav-link" data-scroll-target="#nyc-311-service-requests">NYC 311 Service Requests</a></li>
  <li><a href="#setting-up-your-environment" id="toc-setting-up-your-environment" class="nav-link" data-scroll-target="#setting-up-your-environment">Setting Up Your Environment</a></li>
  <li><a href="#how-do-apis-work" id="toc-how-do-apis-work" class="nav-link" data-scroll-target="#how-do-apis-work">How do APIs work?</a></li>
  <li><a href="#writing-api-queries" id="toc-writing-api-queries" class="nav-link" data-scroll-target="#writing-api-queries">Writing API Queries</a>
  <ul class="collapse">
  <li><a href="#limit" id="toc-limit" class="nav-link" data-scroll-target="#limit"><code>$limit</code></a></li>
  <li><a href="#select" id="toc-select" class="nav-link" data-scroll-target="#select"><code>$select</code></a></li>
  <li><a href="#where" id="toc-where" class="nav-link" data-scroll-target="#where"><code>$where</code></a></li>
  <li><a href="#order" id="toc-order" class="nav-link" data-scroll-target="#order"><code>$order</code></a></li>
  <li><a href="#group" id="toc-group" class="nav-link" data-scroll-target="#group"><code>$group</code></a></li>
  <li><a href="#having" id="toc-having" class="nav-link" data-scroll-target="#having"><code>$having</code></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 10: APIs</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lindsay Poirier </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In this lab, we will write queries to access subsets of a very large dataset on the NYC Open Data Portal. We will practice all of the standards we have learned in the course so far in visualizing and wrangling the resulting data.</p>
<section id="learning-goals" class="level3">
<h3 class="anchored" data-anchor-id="learning-goals">Learning Goals</h3>
<ul>
<li>Write API Queries</li>
<li>Recognize different HTTP Response Codes</li>
</ul>
</section>
</section>
<section id="review-of-key-terms" class="level2">
<h2 class="anchored" data-anchor-id="review-of-key-terms">Review of Key Terms</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You may wish to reference this <a href="https://dev.socrata.com/foundry/data.cityofnewyork.us/erm2-nwe9">reference guide</a> when completing this lab.</p>
</div>
</div>
<dl>
<dt>Application Programming Interface (API)</dt>
<dd>
<p>an mechanism that allows programmers or other systems (or users) to access resources from or post data to an online data service</p>
</dd>
<dt>HTTP</dt>
<dd>
<p>a Web protocol for transmitting documents (e.g.&nbsp;Web pages, images, datasets, etc.) between web servers and browsers</p>
</dd>
<dt>Endpoint</dt>
<dd>
<p>An exposed portion of an online data service that clients can assess via API queries</p>
</dd>
</dl>
</section>
<section id="nyc-311-service-requests" class="level2">
<h2 class="anchored" data-anchor-id="nyc-311-service-requests">NYC 311 Service Requests</h2>
<p>311 is a dialing code set aside in many cities across the US to field calls about requests for municipal service – fixing potholes, reporting noise complaints, reporting parking infractions, etc. NYC has one of the most comprehensive 311 programs in the country, fielding calls to be routed to one of the city’s 77 agencies. Unlike in many other cities, New Yorkers can call 311 to report sexual harassment in taxi cabs or to report tenant rights issues (like a landlord failing to address a lack of heat or hot water). In October 2011, data documenting each request for service New Yorkers had made to 311 began to be published daily to the city’s public-facing open data portal. Since then, the dataset has become one of the largest and most complex archived and maintained on the portal, which includes datasets covering topics from restaurant health inspections, to crime statistics, to construction permits. Each row in the 311 dataset details one anonymized and geocoded request - the type of request that was made, when it was made, the location where the incident occurred, and how the relevant NYC agency responded. As of November 2022, the dataset has over 31 million rows, representing service requests made to 311 since 2010.</p>
<p>When the 311 program was introduced, it was celebrated for its bottom-up approach to producing empirical evidence about problems facing New Yorkers; the program buttressed a persuasive techno-liberal imaginary, suggesting that fair and unbiased representation of quality of life concerns would emanate through the crowd-sourced data. When wrangled and visualized, the data can produce persuasive narratives about the state of equity and quality of life in communities across NYC, and thus a number of communities now leverage the data to legitimate claims. Community boards regularly cite 311 statistics about noise, infrastructure, and rodent issues when preparing district budget requests. Activists present the data to city legislators when advocating for or against new housing and transportation laws. Cyclists have produced apps that track complaints about the blocked bicycle lanes in New York. Journalists regularly reference the dataset to report which communities have received the most noise complaints, have had the most restaurants not following Covid-19 orders, or have had the most rat sightings. In 2018, eight pieces of legislation introduced by City Council required data about various issues – from rodent complaints, to noise complaints, to complaints about sexual harassment in taxis – be reported to the city agencies responsible for addressing those issues.</p>
<p>Yet, while representatives acknowledge 311 data to be a useful form of evidence for quality of life issues, they can be hesitant to rely on 311 statistics alone to measure urban problems. Communities that regularly leverage 311 open data warn that the data does not “represent” the saturation of problems in the city but that they represent “where people are complaining in the city.”</p>
<p>Mapping the data shows that, for almost all reported issues, 311 complaints are disproportionately high in gentrifying communities. The data under-represents problems in areas where individuals do not know to report, do not have the capacity to report, or fear harassment (from their landlords or bosses) for reporting. Complaints about NYC Housing Authority (NYCHA) are entirely excluded from the data. The data also over-represents problems when weaponized against minority communities and small businesses to consistently report minor and sometimes false noise issues or legal infractions. While this highlights how the dataset is being used to propagate inequity across the city, activists have also recognized that they can leverage 311 in liberatory ways. I’ve interviewed tenant rights groups that will run 311 calling campaigns in housing complexes, which can significantly increase the number of complaints made at a particular address - not necessarily because it is experiencing more issues than the building next to it, but because there has been advocacy around reporting the issues at this location.</p>
</section>
<section id="setting-up-your-environment" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-your-environment">Setting Up Your Environment</h2>
<ol type="1">
<li><p>Install the <code>httr</code> package.</p></li>
<li><p>Run the code below to load the packages for today’s lab</p></li>
</ol>
<div class="cell" data-document="show">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-do-apis-work" class="level2">
<h2 class="anchored" data-anchor-id="how-do-apis-work">How do APIs work?</h2>
<p>APIs enable us to access data from an online service via an API query. Here are the steps that take place behind the scenes when we issue a Web-based API query:</p>
<ol type="1">
<li><p>We provide a line of code that indicates the location of a database online (or the data’s <em>endpoint</em>) and what subsets and aggregates of data want. This line of code is called an <em>API query.</em> API queries look very much like URLs that you enter into a Web browser to access a Web page.</p></li>
<li><p>We issue that request by entering the API query into a Web browser, or by referencing it via an import function in <code>R</code>.</p></li>
<li><p>A request to GET the data resource is issued via the <em>Hypertext Transfer Protocol (HTTP)</em> - a protocol that manages the transfer of data between clients and servers on the Web. HTTP sends a request to the location indicated by the endpoint to retrieve the data.</p></li>
<li><p>A response code gets issued from the server to the client. There are many codes associated with different issues, but here are the most common:</p></li>
</ol>
<ul>
<li><code>200</code> indicates success (or that the data can be accessed).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">GET</span>(<span class="st">"http://smith.edu/"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>example[[<span class="st">"status_code"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 200</code></pre>
</div>
</div>
<ul>
<li><code>403</code> indicates that the client does not have permission to access the data.</li>
<li><code>404</code> indicates that the resource could not be found at the endpoint the client specified. For example, below the directory <code>this-url-does-not-exist</code> does not exist at <a href="http://smith.edu/" class="uri">http://smith.edu/</a>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">GET</span>(<span class="st">"http://smith.edu/this-url-does-not-exist"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>example[[<span class="st">"status_code"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 404</code></pre>
</div>
</div>
<p>If successful, the server also sends the requested resource to the client.</p>
<p>This all happens very quickly, and most of it we don’t see!</p>
</section>
<section id="writing-api-queries" class="level2">
<h2 class="anchored" data-anchor-id="writing-api-queries">Writing API Queries</h2>
<p>An API query can be parsed into component parts:</p>
<ol type="1">
<li>An endpoint to the data resource</li>
<li>The format we want the data returned in (e.g.&nbsp;CSV, JSON, XML)</li>
<li>Parameters indicating what subsets/aggregates of the data that we want</li>
<li>A reference to an API key that grants us access to the data</li>
</ol>
<p>Different APIs have different syntax rules for formatting API queries, so it is important to reference the API documentation to learn how these component parts come together.</p>
<p>Today we are going to use the API that is made available from Socarata. Socrata is a Web hosting platform that is very commonly used by state and municipal governments, along with federal agencies, to host open government datasets. For example, the City of New York, the City of Chicago, the US Center for Disease Control, and the state of Texas all use the Socrata platform to host datasets they wish to make available to the public. Because Socrata is managing the data, Socrata also defines the API to access the data. A Socrata API query will follow this basic format:</p>
<p><code>&lt;endpoint&gt;.&lt;format&gt;?&lt;optional-parameters&gt;</code></p>
<blockquote class="blockquote">
<p>Note that most calls to Socrata do not require an API key.</p>
</blockquote>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>NYC 311 is updated very often, and APIs allow us to access the most recent data available at a service. This means that your results for this lab will probably look different from mine. My results are based on running these codes on the evening of November 29, 2022.</p>
</div>
</div>
<section id="question" class="level6">
<h6 class="anchored" data-anchor-id="question">Question</h6>
<div class="question">
<p>Write an API query to access data at the endpoint <a href="https://data.cityofnewyork.us/resource/erm2-nwe9" class="uri">https://data.cityofnewyork.us/resource/erm2-nwe9</a> in a CSV format. Let’s not worry about adding parameters yet. The resulting data frame should look something like my data frame below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#nyc_311 &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#head(nyc_311)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["unique_key"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["created_date"],"name":[2],"type":["dttm"],"align":["right"]},{"label":["closed_date"],"name":[3],"type":["dttm"],"align":["right"]},{"label":["agency"],"name":[4],"type":["chr"],"align":["left"]},{"label":["agency_name"],"name":[5],"type":["chr"],"align":["left"]},{"label":["complaint_type"],"name":[6],"type":["chr"],"align":["left"]},{"label":["descriptor"],"name":[7],"type":["chr"],"align":["left"]},{"label":["location_type"],"name":[8],"type":["chr"],"align":["left"]},{"label":["incident_zip"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["incident_address"],"name":[10],"type":["chr"],"align":["left"]},{"label":["street_name"],"name":[11],"type":["chr"],"align":["left"]},{"label":["cross_street_1"],"name":[12],"type":["chr"],"align":["left"]},{"label":["cross_street_2"],"name":[13],"type":["chr"],"align":["left"]},{"label":["intersection_street_1"],"name":[14],"type":["chr"],"align":["left"]},{"label":["intersection_street_2"],"name":[15],"type":["chr"],"align":["left"]},{"label":["address_type"],"name":[16],"type":["chr"],"align":["left"]},{"label":["city"],"name":[17],"type":["chr"],"align":["left"]},{"label":["landmark"],"name":[18],"type":["chr"],"align":["left"]},{"label":["facility_type"],"name":[19],"type":["chr"],"align":["left"]},{"label":["status"],"name":[20],"type":["chr"],"align":["left"]},{"label":["due_date"],"name":[21],"type":["dttm"],"align":["right"]},{"label":["resolution_description"],"name":[22],"type":["chr"],"align":["left"]},{"label":["resolution_action_updated_date"],"name":[23],"type":["dttm"],"align":["right"]},{"label":["community_board"],"name":[24],"type":["chr"],"align":["left"]},{"label":["bbl"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["borough"],"name":[26],"type":["chr"],"align":["left"]},{"label":["x_coordinate_state_plane"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["y_coordinate_state_plane"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["open_data_channel_type"],"name":[29],"type":["chr"],"align":["left"]},{"label":["park_facility_name"],"name":[30],"type":["chr"],"align":["left"]},{"label":["park_borough"],"name":[31],"type":["chr"],"align":["left"]},{"label":["vehicle_type"],"name":[32],"type":["chr"],"align":["left"]},{"label":["taxi_company_borough"],"name":[33],"type":["lgl"],"align":["right"]},{"label":["taxi_pick_up_location"],"name":[34],"type":["chr"],"align":["left"]},{"label":["bridge_highway_name"],"name":[35],"type":["chr"],"align":["left"]},{"label":["bridge_highway_direction"],"name":[36],"type":["chr"],"align":["left"]},{"label":["road_ramp"],"name":[37],"type":["chr"],"align":["left"]},{"label":["bridge_highway_segment"],"name":[38],"type":["chr"],"align":["left"]},{"label":["latitude"],"name":[39],"type":["dbl"],"align":["right"]},{"label":["longitude"],"name":[40],"type":["dbl"],"align":["right"]},{"label":["location"],"name":[41],"type":["chr"],"align":["left"]}],"data":[{"1":"65882397","2":"2025-08-19 02:05:29","3":"<NA>","4":"DOT","5":"Department of Transportation","6":"Street Condition","7":"Pothole","8":"NA","9":"10307","10":"NA","11":"NA","12":"NA","13":"NA","14":"CHEEVERS LANE","15":"GIEGERICH AVENUE","16":"INTERSECTION","17":"STATEN ISLAND","18":"NA","19":"N/A","20":"Open","21":"<NA>","22":"The Department of Transportation referred this complaint to the appropriate Maintenance Unit for repair.","23":"2025-08-19 02:05:29","24":"03 STATEN ISLAND","25":"NA","26":"STATEN ISLAND","27":"919224","28":"126245","29":"UNKNOWN","30":"Unspecified","31":"STATEN ISLAND","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.51295","40":"-74.23386","41":"\\n,  \\n(40.51295015492112, -74.23385729955827)"},{"1":"65890355","2":"2025-08-19 02:03:12","3":"<NA>","4":"DOT","5":"Department of Transportation","6":"Street Condition","7":"Pothole","8":"NA","9":"10307","10":"GIEGERICH AVENUE","11":"GIEGERICH AVENUE","12":"NA","13":"NA","14":"CHEEVERS LANE","15":"GIEGERICH AVENUE","16":"INTERSECTION","17":"STATEN ISLAND","18":"NA","19":"N/A","20":"Open","21":"<NA>","22":"The Department of Transportation referred this complaint to the appropriate Maintenance Unit for repair.","23":"2025-08-19 02:03:12","24":"03 STATEN ISLAND","25":"NA","26":"STATEN ISLAND","27":"919224","28":"126245","29":"UNKNOWN","30":"Unspecified","31":"STATEN ISLAND","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.51295","40":"-74.23386","41":"\\n,  \\n(40.51295015492112, -74.23385729955827)"},{"1":"65890354","2":"2025-08-19 01:38:43","3":"<NA>","4":"DOT","5":"Department of Transportation","6":"Street Condition","7":"Pothole","8":"NA","9":"10468","10":"NA","11":"NA","12":"NA","13":"NA","14":"GRAND AVENUE","15":"WEST FORDHAM ROAD","16":"INTERSECTION","17":"BRONX","18":"NA","19":"N/A","20":"Open","21":"<NA>","22":"The Department of Transportation referred this complaint to the appropriate Maintenance Unit for repair.","23":"2025-08-19 01:38:43","24":"07 BRONX","25":"NA","26":"BRONX","27":"1010992","28":"253610","29":"UNKNOWN","30":"Unspecified","31":"BRONX","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.86274","40":"-73.90332","41":"\\n,  \\n(40.86273505373792, -73.90332024389409)"},{"1":"65890661","2":"2025-08-19 01:36:25","3":"<NA>","4":"NYPD","5":"New York City Police Department","6":"Noise - Residential","7":"Banging/Pounding","8":"Residential Building/House","9":"11212","10":"275 EAST   94 STREET","11":"EAST   94 STREET","12":"CLARKSON AVENUE","13":"KINGS HIGHWAY","14":"CLARKSON AVENUE","15":"KINGS HIGHWAY","16":"ADDRESS","17":"BROOKLYN","18":"EAST   94 STREET","19":"NA","20":"In Progress","21":"<NA>","22":"NA","23":"<NA>","24":"17 BROOKLYN","25":"3046490001","26":"BROOKLYN","27":"1005857","28":"179466","29":"PHONE","30":"Unspecified","31":"BROOKLYN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.65924","40":"-73.92212","41":"\\n,  \\n(40.65924305589766, -73.92212299068564)"},{"1":"65886089","2":"2025-08-19 01:36:03","3":"<NA>","4":"NYPD","5":"New York City Police Department","6":"Noise - Street/Sidewalk","7":"Loud Talking","8":"Street/Sidewalk","9":"10065","10":"MADISON AVENUE","11":"MADISON AVENUE","12":"EAST   67 STREET","13":"EAST   68 STREET","14":"EAST   67 STREET","15":"EAST   68 STREET","16":"BLOCKFACE","17":"NA","18":"NA","19":"NA","20":"In Progress","21":"<NA>","22":"NA","23":"<NA>","24":"Unspecified MANHATTAN","25":"NA","26":"MANHATTAN","27":"NA","28":"NA","29":"PHONE","30":"Unspecified","31":"MANHATTAN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"NA","40":"NA","41":"NA"},{"1":"65889456","2":"2025-08-19 01:35:57","3":"<NA>","4":"NYPD","5":"New York City Police Department","6":"Illegal Parking","7":"Blocked Sidewalk","8":"Street/Sidewalk","9":"11220","10":"5901 6 AVENUE","11":"6 AVENUE","12":"59 STREET","13":"60 STREET","14":"59 STREET","15":"60 STREET","16":"ADDRESS","17":"BROOKLYN","18":"6 AVENUE","19":"NA","20":"In Progress","21":"<NA>","22":"NA","23":"<NA>","24":"07 BROOKLYN","25":"3008650001","26":"BROOKLYN","27":"980520","28":"171951","29":"MOBILE","30":"Unspecified","31":"BROOKLYN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.63864","40":"-74.01344","41":"\\n,  \\n(40.63864158750373, -74.01343969672016)"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="section" class="level7">
<p class="heading"></p>
</section>
</section>
<section id="limit" class="level3">
<h3 class="anchored" data-anchor-id="limit"><code>$limit</code></h3>
<p>Note that this will only return the first 1000 rows of data.</p>
<p>…but we know from examining the <a href="https://data.cityofnewyork.us/resource/erm2-nwe9">“311 Service Requests from 2010 to Present”</a> metadata that this dataset has over 30 million rows. By default, the API limits the amount of data that gets sent to us so as not to overwhelm our systems.</p>
<p>We can manually adjust how much data gets sent by setting the <code>limit</code> parameter to a specific number of rows we wish to have returned. To add a parameter to a Socrata query, first, we put a <code>?</code> at the end of the query. This indicates that we’re about to list a series of parameters. We then reference parameter names we wish to set behind a <code>$</code> (e.g.&nbsp;<code>...?$limit</code>). Finally, we set values to those parameters by adding <code>=&lt;some-value&gt;</code> after the parameter name. (e.g.&nbsp;<code>...?$limit=10</code>).</p>
<section id="question-1" class="level6">
<h6 class="anchored" data-anchor-id="question-1">Question</h6>
<div class="question">
<p>Let’s say I wanted to access data at the endpoint <a href="https://data.cityofnewyork.us/resource/erm2-nwe9" class="uri">https://data.cityofnewyork.us/resource/erm2-nwe9</a> in a CSV format. Let’s not worry about adding parameters yet. Adjust your call above to limit the results to 20 rows of 311 data. The resulting data frame should look something like my data frame below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#nyc_311 &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#head(nyc_311)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["unique_key"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["created_date"],"name":[2],"type":["dttm"],"align":["right"]},{"label":["closed_date"],"name":[3],"type":["lgl"],"align":["right"]},{"label":["agency"],"name":[4],"type":["chr"],"align":["left"]},{"label":["agency_name"],"name":[5],"type":["chr"],"align":["left"]},{"label":["complaint_type"],"name":[6],"type":["chr"],"align":["left"]},{"label":["descriptor"],"name":[7],"type":["chr"],"align":["left"]},{"label":["location_type"],"name":[8],"type":["chr"],"align":["left"]},{"label":["incident_zip"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["incident_address"],"name":[10],"type":["chr"],"align":["left"]},{"label":["street_name"],"name":[11],"type":["chr"],"align":["left"]},{"label":["cross_street_1"],"name":[12],"type":["chr"],"align":["left"]},{"label":["cross_street_2"],"name":[13],"type":["chr"],"align":["left"]},{"label":["intersection_street_1"],"name":[14],"type":["chr"],"align":["left"]},{"label":["intersection_street_2"],"name":[15],"type":["chr"],"align":["left"]},{"label":["address_type"],"name":[16],"type":["chr"],"align":["left"]},{"label":["city"],"name":[17],"type":["chr"],"align":["left"]},{"label":["landmark"],"name":[18],"type":["chr"],"align":["left"]},{"label":["facility_type"],"name":[19],"type":["chr"],"align":["left"]},{"label":["status"],"name":[20],"type":["chr"],"align":["left"]},{"label":["due_date"],"name":[21],"type":["lgl"],"align":["right"]},{"label":["resolution_description"],"name":[22],"type":["chr"],"align":["left"]},{"label":["resolution_action_updated_date"],"name":[23],"type":["dttm"],"align":["right"]},{"label":["community_board"],"name":[24],"type":["chr"],"align":["left"]},{"label":["bbl"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["borough"],"name":[26],"type":["chr"],"align":["left"]},{"label":["x_coordinate_state_plane"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["y_coordinate_state_plane"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["open_data_channel_type"],"name":[29],"type":["chr"],"align":["left"]},{"label":["park_facility_name"],"name":[30],"type":["chr"],"align":["left"]},{"label":["park_borough"],"name":[31],"type":["chr"],"align":["left"]},{"label":["vehicle_type"],"name":[32],"type":["lgl"],"align":["right"]},{"label":["taxi_company_borough"],"name":[33],"type":["lgl"],"align":["right"]},{"label":["taxi_pick_up_location"],"name":[34],"type":["lgl"],"align":["right"]},{"label":["bridge_highway_name"],"name":[35],"type":["lgl"],"align":["right"]},{"label":["bridge_highway_direction"],"name":[36],"type":["lgl"],"align":["right"]},{"label":["road_ramp"],"name":[37],"type":["lgl"],"align":["right"]},{"label":["bridge_highway_segment"],"name":[38],"type":["chr"],"align":["left"]},{"label":["latitude"],"name":[39],"type":["dbl"],"align":["right"]},{"label":["longitude"],"name":[40],"type":["dbl"],"align":["right"]},{"label":["location"],"name":[41],"type":["chr"],"align":["left"]}],"data":[{"1":"65882397","2":"2025-08-19 02:05:29","3":"NA","4":"DOT","5":"Department of Transportation","6":"Street Condition","7":"Pothole","8":"NA","9":"10307","10":"NA","11":"NA","12":"NA","13":"NA","14":"CHEEVERS LANE","15":"GIEGERICH AVENUE","16":"INTERSECTION","17":"STATEN ISLAND","18":"NA","19":"N/A","20":"Open","21":"NA","22":"The Department of Transportation referred this complaint to the appropriate Maintenance Unit for repair.","23":"2025-08-19 02:05:29","24":"03 STATEN ISLAND","25":"NA","26":"STATEN ISLAND","27":"919224","28":"126245","29":"UNKNOWN","30":"Unspecified","31":"STATEN ISLAND","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.51295","40":"-74.23386","41":"\\n,  \\n(40.51295015492112, -74.23385729955827)"},{"1":"65890355","2":"2025-08-19 02:03:12","3":"NA","4":"DOT","5":"Department of Transportation","6":"Street Condition","7":"Pothole","8":"NA","9":"10307","10":"GIEGERICH AVENUE","11":"GIEGERICH AVENUE","12":"NA","13":"NA","14":"CHEEVERS LANE","15":"GIEGERICH AVENUE","16":"INTERSECTION","17":"STATEN ISLAND","18":"NA","19":"N/A","20":"Open","21":"NA","22":"The Department of Transportation referred this complaint to the appropriate Maintenance Unit for repair.","23":"2025-08-19 02:03:12","24":"03 STATEN ISLAND","25":"NA","26":"STATEN ISLAND","27":"919224","28":"126245","29":"UNKNOWN","30":"Unspecified","31":"STATEN ISLAND","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.51295","40":"-74.23386","41":"\\n,  \\n(40.51295015492112, -74.23385729955827)"},{"1":"65890354","2":"2025-08-19 01:38:43","3":"NA","4":"DOT","5":"Department of Transportation","6":"Street Condition","7":"Pothole","8":"NA","9":"10468","10":"NA","11":"NA","12":"NA","13":"NA","14":"GRAND AVENUE","15":"WEST FORDHAM ROAD","16":"INTERSECTION","17":"BRONX","18":"NA","19":"N/A","20":"Open","21":"NA","22":"The Department of Transportation referred this complaint to the appropriate Maintenance Unit for repair.","23":"2025-08-19 01:38:43","24":"07 BRONX","25":"NA","26":"BRONX","27":"1010992","28":"253610","29":"UNKNOWN","30":"Unspecified","31":"BRONX","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.86274","40":"-73.90332","41":"\\n,  \\n(40.86273505373792, -73.90332024389409)"},{"1":"65890661","2":"2025-08-19 01:36:25","3":"NA","4":"NYPD","5":"New York City Police Department","6":"Noise - Residential","7":"Banging/Pounding","8":"Residential Building/House","9":"11212","10":"275 EAST   94 STREET","11":"EAST   94 STREET","12":"CLARKSON AVENUE","13":"KINGS HIGHWAY","14":"CLARKSON AVENUE","15":"KINGS HIGHWAY","16":"ADDRESS","17":"BROOKLYN","18":"EAST   94 STREET","19":"NA","20":"In Progress","21":"NA","22":"NA","23":"<NA>","24":"17 BROOKLYN","25":"3046490001","26":"BROOKLYN","27":"1005857","28":"179466","29":"PHONE","30":"Unspecified","31":"BROOKLYN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.65924","40":"-73.92212","41":"\\n,  \\n(40.65924305589766, -73.92212299068564)"},{"1":"65886089","2":"2025-08-19 01:36:03","3":"NA","4":"NYPD","5":"New York City Police Department","6":"Noise - Street/Sidewalk","7":"Loud Talking","8":"Street/Sidewalk","9":"10065","10":"MADISON AVENUE","11":"MADISON AVENUE","12":"EAST   67 STREET","13":"EAST   68 STREET","14":"EAST   67 STREET","15":"EAST   68 STREET","16":"BLOCKFACE","17":"NA","18":"NA","19":"NA","20":"In Progress","21":"NA","22":"NA","23":"<NA>","24":"Unspecified MANHATTAN","25":"NA","26":"MANHATTAN","27":"NA","28":"NA","29":"PHONE","30":"Unspecified","31":"MANHATTAN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"NA","40":"NA","41":"NA"},{"1":"65889456","2":"2025-08-19 01:35:57","3":"NA","4":"NYPD","5":"New York City Police Department","6":"Illegal Parking","7":"Blocked Sidewalk","8":"Street/Sidewalk","9":"11220","10":"5901 6 AVENUE","11":"6 AVENUE","12":"59 STREET","13":"60 STREET","14":"59 STREET","15":"60 STREET","16":"ADDRESS","17":"BROOKLYN","18":"6 AVENUE","19":"NA","20":"In Progress","21":"NA","22":"NA","23":"<NA>","24":"07 BROOKLYN","25":"3008650001","26":"BROOKLYN","27":"980520","28":"171951","29":"MOBILE","30":"Unspecified","31":"BROOKLYN","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"40.63864","40":"-74.01344","41":"\\n,  \\n(40.63864158750373, -74.01343969672016)"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="section-1" class="level7">
<p class="heading"></p>
<p>Additional parameters are available to subset and aggregate our data in various ways. Socrata has it’s own query language called <code>SoQL</code>, which codifies these parameters. <code>SoQL</code> is modeled after <code>SQL</code> - a language for querying data stored in large relational databases. Many <code>SoQL</code> parameters have a direct translation to <code>SQL</code> parameters. …and many of the parameters also have a direct translation to our <code>dplyr</code> data wrangling verbs.</p>
<table class="table">
<thead>
<tr class="header">
<th><code>dplyr</code></th>
<th><code>SoQL</code></th>
<th><code>SQL</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>head()</code></td>
<td><code>$limit</code></td>
<td><code>LIMIT</code></td>
</tr>
<tr class="even">
<td><code>select()</code></td>
<td><code>$select</code></td>
<td><code>SELECT</code></td>
</tr>
<tr class="odd">
<td><code>filter()</code></td>
<td><code>$where</code></td>
<td><code>WHERE</code></td>
</tr>
<tr class="even">
<td><code>group_by()</code></td>
<td><code>$group</code></td>
<td><code>GROUP BY</code></td>
</tr>
<tr class="odd">
<td><code>arrange()</code></td>
<td><code>$order</code></td>
<td><code>ORDER BY</code></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="select" class="level3">
<h3 class="anchored" data-anchor-id="select"><code>$select</code></h3>
<p>This dataset has 41 columns, and many of the variables in this dataset will not be immediately relevant to a data science task at hand. By pulling all of the columns, we are requesting much more data (and space on our computers!) than we actually need. We can request that only specific columns be returned via the <code>$select=</code> parameter. We assign the names of the fields we wish to have returned to this parameter. We can find the names of the fields at our data documentation <a href="https://dev.socrata.com/foundry/data.cityofnewyork.us/erm2-nwe9">here</a>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that we use <code>%&gt;%</code> or <code>|&gt;</code> to string together multiple data wrangling verbs in <code>dplyr</code>. When writing SoQL, we use <code>&amp;</code> to string together multiple parameters (e.g.&nbsp;<code>...?$limit=&lt;value&gt;&amp;$select=&lt;value&gt;</code>.</p>
</div>
</div>
<section id="question-2" class="level6">
<h6 class="anchored" data-anchor-id="question-2">Question</h6>
<div class="question">
<p>Create an API call to return the unique keys and complaint types for the latest 30 entries in NYC’s 311 open dataset. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>nyc_311 %&gt;% 
  select(unique_key, complaint_type) %&gt;% 
  head(30)</code></pre>
<p>Plot the counts of complaint types as a barplot. It should look something like my plot below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_unique_keys &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="review_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="where" class="level3">
<h3 class="anchored" data-anchor-id="where"><code>$where</code></h3>
<p>It’s most likely that I don’t want just 30 random rows of data, but instead that I want specific subsets of the data. We can use the <code>$where=</code> parameter to filter the data to relevant rows. Just like with <code>filter()</code> in <code>dplyr</code>, we can return cases where the values in a row are equal to (<code>=</code>), not equal to (<code>!=</code>), greater than (<code>&gt;</code>), or less than (<code>&lt;</code>) a value we supply (e.g.&nbsp;<code>$where=&lt;field&gt;=&lt;value&gt;</code> or <code>$where=&lt;field&gt;&gt;&lt;value&gt;</code>)</p>
<section id="percent-encoding" class="level4">
<h4 class="anchored" data-anchor-id="percent-encoding">Percent Encoding</h4>
<p>When determining the value that we are going to supply to the <code>$where</code> parameter, it’s important to keep in mind that not all characters are safe to include in URLs. Some of our keyboard characters serve special purposes in URLs. For instance, the <code>/</code> is used to indicate a sub-directory, and (as we’ve just learned) <code>?</code> are used to indicate that we are about to string a series of parameters to the end of the URL. Because these characters serve special purposes in a URL, we can’t use them when writing out our value in the <code>?where</code> parameter… So what do we do when we want to supply a value that includes one of these special characters?</p>
<p>This is where percent encoding comes in. Whenever we would normally use the special characters listed below on the left in a URL, we would replace it with the percent encoding listed on the right.</p>
<ul>
<li>space <code></code>: <code>%20</code></li>
<li><code>!</code>: <code>%21</code></li>
<li><code>"</code>: <code>%22</code></li>
<li><code>%</code>: <code>%25</code></li>
<li><code>'</code>: <code>%27</code></li>
<li><code>-</code>: <code>%2D</code></li>
</ul>
<p>So for instance, the following: <code>'Noise - Commercial'</code> includes five reserved characters:</p>
<ol type="1">
<li>an apostrophe</li>
<li>a space</li>
<li>a dash</li>
<li>another space</li>
<li>another apostrophe.</li>
</ol>
<p>I would encode that value as follows: <code>%27Noise%20%2D%20Commercial%27</code>.</p>
<div class="question">
<p>Create an API call to return the unique keys, created_dates and complaint_types for the rows where the agency is listed as ‘FDNY’. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>nyc_311 %&gt;%
  select(unique_key, created_date, complaint_type) %&gt;%
  filter(agency == 'FDNY')
  </code></pre>
<p>Plot the data as a point point to match my plot below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_fdny &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="review_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="section-2" class="level7">
<p class="heading"></p>
<p>We can also string together multiple filter conditions with operators like <code>AND</code>, <code>OR</code>, <code>NOT</code>, <code>IS NULL</code>, etc. <code>$where=&lt;field&gt;=&lt;value&gt; AND &lt;field&gt;=&lt;value&gt;</code>. Note that there are spaces between the first and second condition above, and spaces are reserved characters. We need to replace those spaces with the percent encodings for spaces: <code>$where=&lt;field&gt;=&lt;value&gt;%20AND%20&lt;field&gt;=&lt;value&gt;</code>.</p>
</section>
<section id="question-3" class="level6">
<h6 class="anchored" data-anchor-id="question-3">Question</h6>
<div class="question">
<p>Create an API call to return the unique keys, created dates, incident addresses, and BBLs (this is a unique ID for the tax lot of a building in NYC) for rows with complaint type “Food Poisoning” in Manhattan’s community district 5 (which hosts Times Square and other major NYC tourist attractions). Limit the results to 3000 entries in NYC’s 311 open dataset. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>    nyc_311 %&gt;% 
      select(unique_key, created_date, incident_address, bbl) %&gt;% 
      filter(complaint_type == "Food Poisoning" &amp; 
              community_board == "05 MANHATTAN") %&gt;% 
      head(3000)
      </code></pre>
<p>Wrangle the resulting data frame to determine the 5 addresses with the most food poisoning complaints in this community district. It will look something like my data frame below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_food_poisoning &lt;- read_csv(&lt;URL HERE!&gt;)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["incident_address"],"name":[1],"type":["chr"],"align":["left"]},{"label":["count"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"89 EAST   42 STREET","2":"21"},{"1":"1 PENN PLAZA","2":"17"},{"1":"200 5 AVENUE","2":"15"},{"1":"GRAND CENTRAL TERMINAL","2":"15"},{"1":"5 AVENUE","2":"13"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="section-3" class="level7">
<p class="heading"></p>
</section>
</section>
</section>
</section>
<section id="order" class="level3">
<h3 class="anchored" data-anchor-id="order"><code>$order</code></h3>
<p>The <code>$order</code> parameter will re-arrange the rows, according to the values in a column that we supply, such that the smallest value will appear at the top and the largest value will appear at the bottom (e.g.&nbsp;<code>$order=&lt;field&gt;</code>). We can tack <code>DESC</code> to end of this parameter in order to reverse the sorting order (e.g.&nbsp;<code>$order=&lt;field&gt;%20DESC</code>).</p>
<section id="question-4" class="level6">
<h6 class="anchored" data-anchor-id="question-4">Question</h6>
<div class="question">
<p>Order the previous result in descending order by created date, and the subset to the 500 most recent complaints. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>    nyc_311 %&gt;% 
      select(unique_key, created_date, incident_address, bbl) %&gt;% 
      filter(complaint_type == "Food Poisoning" &amp; 
              community_board == "05 MANHATTAN") %&gt;% 
      arrange(desc(created_date)) %&gt;%
      head(500)</code></pre>
<p>Wrangle the resulting data frame to determine the count of complaints at each BBL, and order the results by the count. Store the data frame in <code>nyc_311_food_poisoning_ordered_counts</code>.</p>
<p>I’ve written an API query to return most recent restaurant grades for restaurants in Manhattan’s community district 5. Join the two data frames by the <code>bbl</code>.</p>
<blockquote class="blockquote">
<p>Note that there can be more than one restaurant on a particular tax lot. This means that, if there were x number of Food Poisoning complaints at a particular lot, those complaints may have been associated with any number of restaurants at that lot. BBL is the most specific field we have available for identifying the location associated with a complaint in 311. This means that we are most likely going to have a one-to-many join, and we need to be careful when making assumptions about associations across the datasets.</p>
</blockquote>
<p>Your resulting data frame should look something like mine below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_food_poisoning_ordered &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_food_poisoning_ordered_counts &lt;- &lt;WRANGLE HERE!&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>restaurant_inspections <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://data.cityofnewyork.us/resource/43nn-pn8j.csv?$where=community_board=%27105%27%20AND%20grade%20IS%20NOT%20NULL&amp;$select=camis,dba,bbl,grade,max(grade_date)&amp;$group=camis,dba,bbl,grade&amp;$limit=3000"</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Join datasets here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["bbl"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["count"],"name":[2],"type":["int"],"align":["right"]},{"label":["camis"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["dba"],"name":[4],"type":["chr"],"align":["left"]},{"label":["grade"],"name":[5],"type":["chr"],"align":["left"]},{"label":["max_grade_date"],"name":[6],"type":["dttm"],"align":["right"]}],"data":[{"1":"NA","2":"22","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1012800001","2":"13","3":"50086798","4":"JOE COFFEE","5":"A","6":"2024-05-21"},{"1":"1012800001","2":"13","3":"50054114","4":"PROVA PIZZA BAR","5":"A","6":"2023-10-19"},{"1":"1012800001","2":"13","3":"50141271","4":"WONDEREN STROOPWAFFELS","5":"A","6":"2025-01-14"},{"1":"1012800001","2":"13","3":"50088270","4":"TARTINERY","5":"B","6":"2022-02-28"},{"1":"1012800001","2":"13","3":"50088270","4":"TARTINERY","5":"A","6":"2024-06-12"},{"1":"1012800001","2":"13","3":"50063550","4":"THE CAMPBELL","5":"A","6":"2025-07-30"},{"1":"1012800001","2":"13","3":"50000259","4":"CENTRAL MARKET NEW YORK","5":"Z","6":"2025-04-10"},{"1":"1012800001","2":"13","3":"40876078","4":"CIPRIANI DOLCI","5":"C","6":"2022-11-17"},{"1":"1012800001","2":"13","3":"50145494","4":"VAN LEEUWEN","5":"A","6":"2025-08-08"},{"1":"1012800001","2":"13","3":"40368223","4":"OYSTER BAR","5":"A","6":"2024-01-18"},{"1":"1012800001","2":"13","3":"50079524","4":"DOUGHNUT PLANT","5":"A","6":"2025-06-18"},{"1":"1012800001","2":"13","3":"50123927","4":"DIRTY TACO","5":"Z","6":"2025-07-16"},{"1":"1012800001","2":"13","3":"50002514","4":"SHAKE SHACK","5":"A","6":"2024-10-09"},{"1":"1012800001","2":"13","3":"41721605","4":"FRANKIES DOGS ON THE GO","5":"A","6":"2024-03-05"},{"1":"1012800001","2":"13","3":"40423705","4":"ZARO'S BAKERY","5":"A","6":"2024-07-02"},{"1":"1012800001","2":"13","3":"50155513","4":"GRAND BRASSERIE","5":"A","6":"2025-01-21"},{"1":"1012800001","2":"13","3":"40586000","4":"ZARO'S BREAD BASKET","5":"A","6":"2024-12-24"},{"1":"1012800001","2":"13","3":"40876078","4":"CIPRIANI DOLCI","5":"A","6":"2024-05-22"},{"1":"1012800001","2":"13","3":"50145663","4":"PLAYA BOWLS","5":"A","6":"2025-07-10"},{"1":"1012800001","2":"13","3":"50140791","4":"VESELKA","5":"A","6":"2024-11-19"},{"1":"1012800001","2":"13","3":"50126641","4":"BOURKE STREET BAKERY","5":"A","6":"2025-04-16"},{"1":"1012800001","2":"13","3":"50164454","4":"MELBA'S","5":"N","6":"<NA>"},{"1":"1012800001","2":"13","3":"50123927","4":"DIRTY TACO","5":"A","6":"2023-12-05"},{"1":"1012800001","2":"13","3":"50000259","4":"CENTRAL MARKET NEW YORK","5":"B","6":"2024-03-05"},{"1":"1012800001","2":"13","3":"40512617","4":"ZARO'S BREAD BASKET","5":"A","6":"2024-10-10"},{"1":"1012800001","2":"13","3":"50046726","4":"CHIRPING CHICKEN","5":"C","6":"2024-03-20"},{"1":"1012800001","2":"13","3":"50124533","4":"LUKES LOBSTER","5":"A","6":"2023-12-05"},{"1":"1012800001","2":"13","3":"50046726","4":"CHIRPING CHICKEN","5":"A","6":"2025-06-17"},{"1":"1012800001","2":"13","3":"50112090","4":"JOE COFFEE COMPANY","5":"A","6":"2025-05-13"},{"1":"1010150029","2":"8","3":"50001045","4":"BEN & JERRY'S","5":"A","6":"2024-10-02"},{"1":"1010150029","2":"8","3":"50136999","4":"RAISING CANES #888","5":"A","6":"2024-02-06"},{"1":"1010150029","2":"8","3":"50125707","4":"USA BROOKLYN DELICATESSEN","5":"A","6":"2025-08-15"},{"1":"1010150029","2":"8","3":"50080199","4":"MACCHIATO ESPRESSO & WINE BAR","5":"A","6":"2025-01-28"},{"1":"1010150029","2":"8","3":"50107573","4":"TACO BELL","5":"A","6":"2025-05-13"},{"1":"1010150029","2":"8","3":"40396159","4":"CARMINE'S","5":"A","6":"2025-03-17"},{"1":"1010150029","2":"8","3":"41579102","4":"BUBBA GUMP SHRIMP CO.","5":"A","6":"2024-07-11"},{"1":"1010150029","2":"8","3":"41128211","4":"HARD ROCK CAFE","5":"A","6":"2024-09-19"},{"1":"1010150029","2":"8","3":"50145656","4":"DUNKIN'","5":"A","6":"2025-07-16"},{"1":"1010197501","2":"6","3":"50138031","4":"NY BAKERY & DESSERTS","5":"A","6":"2023-10-12"},{"1":"1010197501","2":"6","3":"50082993","4":"MIAS BAKERY TIMES SQUARE","5":"A","6":"2025-04-15"},{"1":"1010197501","2":"6","3":"50145274","4":"RENAISSANCE TIMES SQUARE, MANAGED BY MERRITT HOSPITALITY LLC","5":"A","6":"2024-08-13"},{"1":"1010197501","2":"6","3":"50140001","4":"VAN LEEUWEN ICE CREAM","5":"A","6":"2024-11-25"},{"1":"1010197501","2":"6","3":"40399472","4":"OLIVE GARDEN","5":"A","6":"2024-12-18"},{"1":"1008150001","2":"5","3":"50064080","4":"STARBUCKS COFFEE","5":"A","6":"2024-05-10"},{"1":"1012570002","2":"5","3":"50128860","4":"BAO BY KAYA","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50063195","4":"JOE COFFEE COMPANY","5":"A","6":"2025-07-07"},{"1":"1012570002","2":"5","3":"50144552","4":"PADI D' NYC","5":"Z","6":"2023-12-01"},{"1":"1012570002","2":"5","3":"50141724","4":"MAMAS CHICKEN SHACK HAPPY DUMPLING","5":"N","6":"<NA>"},{"1":"1012570002","2":"5","3":"50099548","4":"BIG Mozz","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"5","3":"50099977","4":"CASA TOSCANA","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50099423","4":"MAYHEM SMOKEHOUSE","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"5","3":"50142810","4":"CHEESE WHEEL PASTA","5":"N","6":"<NA>"},{"1":"1012570002","2":"5","3":"50099905","4":"WINTER PIE SHOP","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50126737","4":"EL PAMBAZO","5":"N","6":"<NA>"},{"1":"1012570002","2":"5","3":"50099574","4":"BOLIVIA LLAMA PARTY","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"5","3":"50127654","4":"WHOOPIE COMPANY","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50099404","4":"ARANCINI BROS","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"5","3":"50140772","4":"LAKSA SHOP","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50143684","4":"HOME FRITE BY ARVIZU","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50099145","4":"MAX BRENNER","5":"A","6":"2022-12-19"},{"1":"1012570002","2":"5","3":"50099579","4":"PIEROGI BOYS","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"5","3":"50099947","4":"BERG PASTRAMI","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"5","3":"50100035","4":"HUDSON VALLEY FARMHOUSE CIDER","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50129323","4":"CRISPY CHICK","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50099508","4":"JICAMA","5":"A","6":"2019-12-10"},{"1":"1012570002","2":"5","3":"50126950","4":"ZARO'S FAMILY BAKERY","5":"N","6":"<NA>"},{"1":"1012570002","2":"5","3":"50098584","4":"NO CHEWING ALLOWED","5":"A","6":"2022-11-14"},{"1":"1012570002","2":"5","3":"50100061","4":"DULCINEA","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"5","3":"50160711","4":"RED HOOK LOBSTER POUND","5":"N","6":"<NA>"},{"1":"1012570002","2":"5","3":"50099498","4":"PICKLE ME PETE","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50100294","4":"TOPAREPA","5":"A","6":"2019-12-18"},{"1":"1012570002","2":"5","3":"50099749","4":"WHOOPS!","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50143671","4":"DO COOKIE DOUGH","5":"N","6":"<NA>"},{"1":"1012570002","2":"5","3":"50142991","4":"WONDEREN STROOPWAFELS","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50129141","4":"PETISCO BRAZUCA","5":"N","6":"<NA>"},{"1":"1012570002","2":"5","3":"50099479","4":"DOUGHNUTTERY","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50143722","4":"TOASTIELAND","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50143145","4":"MMMENFES INC","5":"N","6":"<NA>"},{"1":"1012570002","2":"5","3":"50099801","4":"THE RINKSIDE & LODGE BAR","5":"N","6":"<NA>"},{"1":"1012570002","2":"5","3":"50099127","4":"WAFELS & DINGES","5":"A","6":"2025-01-28"},{"1":"1012570002","2":"5","3":"50143375","4":"CHEESESTEAKS BY THE TRUFFLEIST","5":"N","6":"<NA>"},{"1":"1012570002","2":"5","3":"50129087","4":"KOUKLI SAUCY GREEK","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50099673","4":"DESTINATION DUMPLINGS","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50099221","4":"UNITED CHOCOLATE WORKS","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50100019","4":"TWO TABLESPOONS","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"5","3":"50097939","4":"DO , Cookie Dough Confection","5":"A","6":"2019-12-11"},{"1":"1012570002","2":"5","3":"50100058","4":"BAKED CHEESE HAUS","5":"A","6":"2022-12-14"},{"1":"1012570002","2":"5","3":"50099226","4":"FRIDA'S FAVORITES","5":"A","6":"2023-11-28"},{"1":"1012570002","2":"5","3":"50098928","4":"S'MORES N'MORE","5":"A","6":"2022-11-15"},{"1":"1012580009","2":"5","3":"50060954","4":"JOE & THE JUICE","5":"B","6":"2022-11-29"},{"1":"1012580009","2":"5","3":"50121174","4":"GRACE CONCOURSE PAVILION COFFEE BAR/MARKET","5":"A","6":"2024-10-21"},{"1":"1012580009","2":"5","3":"41626556","4":"STK STEAKHOUSE MIDTOWN","5":"C","6":"2025-05-22"},{"1":"1012580009","2":"5","3":"50060954","4":"JOE & THE JUICE","5":"A","6":"2025-07-23"},{"1":"1012580009","2":"5","3":"41626556","4":"STK STEAKHOUSE MIDTOWN","5":"A","6":"2023-04-17"},{"1":"1012580009","2":"5","3":"50119525","4":"GRACE PAVILION CATERING","5":"A","6":"2025-06-20"},{"1":"1012580009","2":"5","3":"50036191","4":"GABRIEL KREUTHER","5":"A","6":"2023-10-11"},{"1":"1012580009","2":"5","3":"50070146","4":"SWEETGREEN","5":"A","6":"2024-03-26"},{"1":"1013000001","2":"5","3":"50045843","4":"KURO-OBI OF IPPUDO","5":"A","6":"2024-11-29"},{"1":"1013000001","2":"5","3":"50064665","4":"MAYHEM BOOTH 8","5":"A","6":"2023-10-31"},{"1":"1013000001","2":"5","3":"50120019","4":"MYSTTIK MASAALA","5":"Z","6":"2025-08-15"},{"1":"1013000001","2":"5","3":"50103445","4":"PLAYA BOWLS GC","5":"A","6":"2024-12-24"},{"1":"1013000001","2":"5","3":"50121107","4":"MAMAN","5":"A","6":"2025-06-25"},{"1":"1013000001","2":"5","3":"50142618","4":"MOKA MATCHA","5":"Z","6":"2025-08-15"},{"1":"1013000001","2":"5","3":"50143867","4":"VANDERBILT BAR & GRILL","5":"A","6":"2024-03-11"},{"1":"1013000001","2":"5","3":"50123594","4":"SEA PARK","5":"A","6":"2023-12-06"},{"1":"1013000001","2":"5","3":"50122539","4":"YUM YUBU","5":"A","6":"2023-12-06"},{"1":"1013000001","2":"5","3":"50130090","4":"CITY CHIK","5":"A","6":"2023-09-20"},{"1":"1013000001","2":"5","3":"50138454","4":"BRETT'S DELI","5":"A","6":"2025-06-25"},{"1":"1013000001","2":"5","3":"50142618","4":"MOKA MATCHA","5":"A","6":"2024-03-11"},{"1":"1013000001","2":"5","3":"40528180","4":"BOBBY VAN'S , LEA WINE BAR","5":"A","6":"2024-10-10"},{"1":"1013000001","2":"5","3":"50142569","4":"INTERNATIONAL CHICKEN COMPANY","5":"A","6":"2024-03-11"},{"1":"1013000001","2":"5","3":"50097399","4":"SWEETGREEN","5":"A","6":"2024-09-16"},{"1":"1013000001","2":"5","3":"50158052","4":"STARBUCKS CORPORATION","5":"A","6":"2024-09-16"},{"1":"1013000001","2":"5","3":"50120019","4":"MYSTTIK MASAALA","5":"A","6":"2022-11-03"},{"1":"1013000001","2":"5","3":"50128717","4":"MIAN KITCHEN","5":"A","6":"2024-09-16"},{"1":"1013000001","2":"5","3":"50038543","4":"LA PALAPA TACOS","5":"A","6":"2024-04-16"},{"1":"1013000001","2":"5","3":"50143872","4":"BASH BURGER","5":"A","6":"2024-12-19"},{"1":"1008230002","2":"4","3":"41084776","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2024-10-15"},{"1":"1008230002","2":"4","3":"50088217","4":"CAVA","5":"A","6":"2023-12-26"},{"1":"1008230002","2":"4","3":"50088217","4":"CAVA","5":"C","6":"2022-09-26"},{"1":"1008280041","2":"4","3":"41195733","4":"230 FIFTH","5":"A","6":"2024-03-26"},{"1":"1008280041","2":"4","3":"50047217","4":"THE SMITH","5":"B","6":"2022-11-15"},{"1":"1008280041","2":"4","3":"50047217","4":"THE SMITH","5":"A","6":"2024-11-14"},{"1":"1008600064","2":"4","3":"50117694","4":"HOJOKBAN","5":"A","6":"2025-06-05"},{"1":"1010010029","2":"4","3":"41428124","4":"FORTY EIGHT LOUNGE","5":"A","6":"2019-06-08"},{"1":"1010010029","2":"4","3":"50061031","4":"WHITE & CASE COFFEE BAR & PANTRY","5":"A","6":"2025-07-09"},{"1":"1010010029","2":"4","3":"40685858","4":"DEL FRISCO'S DOUBLE EAGLE STEAKHOUSE","5":"A","6":"2025-02-20"},{"1":"1010010029","2":"4","3":"41201799","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2025-02-24"},{"1":"1010010029","2":"4","3":"50061032","4":"WHITE & CASE CAFE","5":"A","6":"2024-11-25"},{"1":"1010010029","2":"4","3":"50143003","4":"MAYER BROWN","5":"A","6":"2025-04-14"},{"1":"1010010029","2":"4","3":"41420319","4":"OCEANA","5":"A","6":"2023-10-03"},{"1":"1010010029","2":"4","3":"41642195","4":"NBC","5":"A","6":"2024-06-24"},{"1":"1010010029","2":"4","3":"50131287","4":"CONVENE","5":"A","6":"2025-03-28"},{"1":"1010010029","2":"4","3":"50046175","4":"ZIBETTO ESPRESSO BAR","5":"A","6":"2024-11-19"},{"1":"1010140001","2":"4","3":"41532039","4":"AUNTIE ANNE'S PRETZELS","5":"A","6":"2024-12-16"},{"1":"1010140001","2":"4","3":"41227884","4":"REGAL CINEMAS","5":"A","6":"2024-07-30"},{"1":"1010140001","2":"4","3":"41663207","4":"FIVE GUYS FAMOUS BURGERS AND FRIES","5":"A","6":"2024-07-01"},{"1":"1013050001","2":"4","3":"41249550","4":"INSIDE PARK AT ST. BART'S","5":"A","6":"2024-10-22"},{"1":"1007800036","2":"3","3":"50106764","4":"NAYA","5":"A","6":"2024-06-03"},{"1":"1007800036","2":"3","3":"40570278","4":"STARBUCKS","5":"A","6":"2024-10-21"},{"1":"1007800036","2":"3","3":"50115404","4":"SMASHBURGER","5":"A","6":"2023-02-03"},{"1":"1007800036","2":"3","3":"50136764","4":"OAKBERRY","5":"B","6":"2025-04-07"},{"1":"1007800036","2":"3","3":"50115404","4":"SMASHBURGER","5":"B","6":"2024-08-19"},{"1":"1007830070","2":"3","3":"50157455","4":"ANITA GELATO","5":"N","6":"<NA>"},{"1":"1007830070","2":"3","3":"50141013","4":"BLUE RIBBON SUSHI AND STEAK","5":"A","6":"2024-03-21"},{"1":"1007830070","2":"3","3":"50145733","4":"DOS TOROS TAQUERIA","5":"A","6":"2024-12-17"},{"1":"1007830070","2":"3","3":"50154611","4":"WASABI SUSHI BENTO","5":"A","6":"2025-02-26"},{"1":"1007830070","2":"3","3":"50116315","4":"OFFICE HOURS","5":"A","6":"2023-08-22"},{"1":"1007830070","2":"3","3":"50139026","4":"PLAYA BOWLS","5":"A","6":"2024-03-19"},{"1":"1007830070","2":"3","3":"50145765","4":"ROSE PIZZA","5":"A","6":"2024-12-17"},{"1":"1007830070","2":"3","3":"50146600","4":"LE CAFE COFFEE","5":"A","6":"2024-11-22"},{"1":"1007830070","2":"3","3":"50143461","4":"INSOMNIA COOKIES","5":"A","6":"2025-07-25"},{"1":"1007830070","2":"3","3":"50161155","4":"REALMUTO (Penn Station-across NJ Transit)","5":"N","6":"<NA>"},{"1":"1007830070","2":"3","3":"50148707","4":"H&H BAGELS","5":"A","6":"2025-02-26"},{"1":"1007830070","2":"3","3":"41451698","4":"Avenida","5":"A","6":"2025-02-18"},{"1":"1007830070","2":"3","3":"50149053","4":"SHAKE SHACK NEW YORK. LLC","5":"A","6":"2024-08-07"},{"1":"1007830070","2":"3","3":"50151362","4":"RAISING CANE'S","5":"N","6":"<NA>"},{"1":"1007830070","2":"3","3":"50151384","4":"CHOP'T","5":"A","6":"2025-04-18"},{"1":"1007830070","2":"3","3":"50118000","4":"THE LANDING","5":"A","6":"2024-04-10"},{"1":"1007830070","2":"3","3":"41371272","4":"The Rutherord","5":"A","6":"2025-02-18"},{"1":"1007830070","2":"3","3":"50120328","4":"BLUE BOTTLE COFFEE","5":"A","6":"2025-08-01"},{"1":"1007830070","2":"3","3":"50146570","4":"STARBUCKS COFFEE #70726","5":"A","6":"2024-08-07"},{"1":"1007830070","2":"3","3":"50140110","4":"LIFE TIME","5":"A","6":"2024-05-08"},{"1":"1008250031","2":"3","3":"41579022","4":"SERRA by BIRRERIA (EATALY)","5":"A","6":"2025-08-14"},{"1":"1008290064","2":"3","3":"50004269","4":"PERGOLA 36","5":"A","6":"2024-10-16"},{"1":"1008290064","2":"3","3":"50004269","4":"PERGOLA 36","5":"C","6":"2022-01-24"},{"1":"1008317503","2":"3","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008340049","2":"3","3":"50132011","4":"TEAMAKERS","5":"Z","6":"2025-08-06"},{"1":"1008340049","2":"3","3":"50091045","4":"PINKBERRY","5":"A","6":"2024-05-15"},{"1":"1008340049","2":"3","3":"50009132","4":"DUNKIN","5":"A","6":"2024-11-14"},{"1":"1008340049","2":"3","3":"41718710","4":"BCD TOFU HOUSE","5":"A","6":"2023-10-12"},{"1":"1008340049","2":"3","3":"41185899","4":"POCHA 32","5":"A","6":"2025-05-29"},{"1":"1008340049","2":"3","3":"41185899","4":"POCHA 32","5":"B","6":"2022-09-20"},{"1":"1008340049","2":"3","3":"50126957","4":"NAYA","5":"A","6":"2024-01-23"},{"1":"1008340049","2":"3","3":"41384019","4":"LEGENDS NYC","5":"B","6":"2024-11-13"},{"1":"1008340049","2":"3","3":"50132011","4":"TEAMAKERS","5":"P","6":"2023-09-27"},{"1":"1008340049","2":"3","3":"41384019","4":"LEGENDS NYC","5":"A","6":"2023-02-14"},{"1":"1008370052","2":"3","3":"50075064","4":"YOON HAEUNDAE GALBI","5":"A","6":"2025-04-07"},{"1":"1008480006","2":"3","3":"50164052","4":"THAI VILLA","5":"N","6":"<NA>"},{"1":"1010007501","2":"3","3":"50118672","4":"RIU PLAZA MANHATTAN TIMES SQUARE CAPITAL GRAB & GO","5":"A","6":"2024-07-10"},{"1":"1010007501","2":"3","3":"50118673","4":"RIU PLAZA MANHATTAN TIMES SQUARE PARK AVENUE RESTAURANT","5":"A","6":"2024-08-01"},{"1":"1010040020","2":"3","3":"50120937","4":"CASA TOSCANA","5":"A","6":"2023-12-14"},{"1":"1010040020","2":"3","3":"50147949","4":"PETISCO BRAZUCA","5":"A","6":"2024-08-08"},{"1":"1010040020","2":"3","3":"50120859","4":"BAO BY KAYA","5":"A","6":"2024-11-21"},{"1":"1010040020","2":"3","3":"40827432","4":"STARBUCKS","5":"A","6":"2025-06-23"},{"1":"1010040020","2":"3","3":"50145804","4":"MARKET BAR AND GRILL","5":"A","6":"2024-01-30"},{"1":"1010040020","2":"3","3":"50161876","4":"PITA YEERO","5":"N","6":"<NA>"},{"1":"1010040020","2":"3","3":"50117510","4":"BNP PARIBAS COFFEE BAR","5":"A","6":"2024-11-20"},{"1":"1010040020","2":"3","3":"50147290","4":"THE INTERNATIONAL CHICKEN COMPANY","5":"N","6":"<NA>"},{"1":"1010040020","2":"3","3":"50149578","4":"BRETT'S DELI","5":"A","6":"2024-05-02"},{"1":"1010040020","2":"3","3":"50132090","4":"BNPP EXECUTIVE DINING","5":"A","6":"2024-11-07"},{"1":"1010040020","2":"3","3":"50146165","4":"PRET A MANGER","5":"A","6":"2025-06-27"},{"1":"1010040020","2":"3","3":"50123997","4":"L'AMI PIERRE","5":"A","6":"2024-12-17"},{"1":"1010040020","2":"3","3":"50133717","4":"MIN SUSHI","5":"A","6":"2024-12-26"},{"1":"1010040020","2":"3","3":"50110660","4":"TOMO TOMO","5":"A","6":"2024-12-10"},{"1":"1010040020","2":"3","3":"50110947","4":"TWENTY ONE GRAINS","5":"A","6":"2024-11-25"},{"1":"1010040020","2":"3","3":"50014653","4":"ALDO SOHM WINE BAR","5":"A","6":"2024-06-27"},{"1":"1010040020","2":"3","3":"40383464","4":"LE BERNARDIN","5":"A","6":"2025-01-29"},{"1":"1010040020","2":"3","3":"41315226","4":"CHOP'T","5":"A","6":"2024-09-09"},{"1":"1010040020","2":"3","3":"50084728","4":"SIDLEY AUSTIN LLP","5":"A","6":"2025-07-09"},{"1":"1010040020","2":"3","3":"50131629","4":"MYSTTIK MASSALA","5":"A","6":"2023-11-21"},{"1":"1010157501","2":"3","3":"50084831","4":"BACALL'S","5":"A","6":"2023-08-16"},{"1":"1010157501","2":"3","3":"41538728","4":"BOWLERO","5":"B","6":"2022-03-01"},{"1":"1010157501","2":"3","3":"50135481","4":"RA SUSHI","5":"A","6":"2024-12-02"},{"1":"1010157501","2":"3","3":"41538728","4":"BOWLERO","5":"A","6":"2024-11-14"},{"1":"1010157501","2":"3","3":"50065488","4":"LOS TACOS NO.1","5":"A","6":"2024-10-30"},{"1":"1010160036","2":"3","3":"41172734","4":"JUNIOR'S RESTAURANT","5":"Z","6":"2025-08-08"},{"1":"1010160036","2":"3","3":"50071438","4":"PLAYSTATION THEATRE","5":"A","6":"2019-06-01"},{"1":"1010160036","2":"3","3":"41172734","4":"JUNIOR'S RESTAURANT","5":"A","6":"2024-03-13"},{"1":"1010160036","2":"3","3":"40483694","4":"MINSKOFF THEATRE","5":"A","6":"2024-04-24"},{"1":"1010200046","2":"3","3":"50102881","4":"THE HARISSON","5":"A","6":"2023-02-06"},{"1":"1010200046","2":"3","3":"50001713","4":"BRASSIERIE 1605, BROADWAY 49 BAR & LOUNGE (MAIN KITCHEN), GRIND & CO","5":"A","6":"2024-12-04"},{"1":"1010200046","2":"3","3":"50105940","4":"KRISPY KREME DOUGHNUT","5":"B","6":"2024-11-12"},{"1":"1010200046","2":"3","3":"50105940","4":"KRISPY KREME DOUGHNUT","5":"A","6":"2022-12-16"},{"1":"1010210001","2":"3","3":"50138084","4":"CARNEGIE DINER","5":"A","6":"2025-04-23"},{"1":"1010210001","2":"3","3":"40703714","4":"PALM RESTAURANT","5":"B","6":"2023-01-31"},{"1":"1010210001","2":"3","3":"50157044","4":"CARNEGIE DINER AND CAFE","5":"N","6":"<NA>"},{"1":"1010210001","2":"3","3":"40703714","4":"PALM RESTAURANT","5":"A","6":"2025-02-06"},{"1":"1010230048","2":"3","3":"41711530","4":"GALLAGHER'S","5":"C","6":"2023-05-16"},{"1":"1010230048","2":"3","3":"41711530","4":"GALLAGHER'S","5":"A","6":"2025-02-24"},{"1":"1010287501","2":"3","3":"41549759","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2024-05-22"},{"1":"1012610051","2":"3","3":"50040002","4":"ST. PATRICK'S BAR AND GRILL","5":"A","6":"2025-02-10"},{"1":"1012630061","2":"3","3":"50108779","4":"KITCHEN PARADISE","5":"C","6":"2023-06-15"},{"1":"1012630061","2":"3","3":"50113607","4":"MR. SUN","5":"Z","6":"2023-06-30"},{"1":"1012630061","2":"3","3":"50108779","4":"KITCHEN PARADISE","5":"A","6":"2025-03-04"},{"1":"1012630061","2":"3","3":"50113607","4":"MR. SUN","5":"C","6":"2022-06-21"},{"1":"1012630061","2":"3","3":"50002071","4":"DELIS 48","5":"A","6":"2024-08-27"},{"1":"1012810066","2":"3","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1012930047","2":"3","3":"40795021","4":"TAO RESTAURANT","5":"A","6":"2024-03-14"},{"1":"1013050060","2":"3","3":"50137554","4":"MYSTTIK MASALA","5":"C","6":"2023-07-26"},{"1":"1013050060","2":"3","3":"50133762","4":"KATI THAI NOODLES AND RICE","5":"A","6":"2024-10-08"},{"1":"1013050060","2":"3","3":"50161349","4":"BRETT'S DELI","5":"N","6":"<NA>"},{"1":"1013050060","2":"3","3":"50103447","4":"PLAYA BOWLS","5":"A","6":"2024-12-30"},{"1":"1013050060","2":"3","3":"50004623","4":"SCHNIPPERS","5":"A","6":"2024-12-23"},{"1":"1013050060","2":"3","3":"50159938","4":"MISS YOLA'S TACOS","5":"A","6":"2025-04-10"},{"1":"1013050060","2":"3","3":"50165134","4":"PITA YEERO","5":"Z","6":"2025-06-11"},{"1":"1013050060","2":"3","3":"50128737","4":"BAO BY KAYA (Urban space)","5":"A","6":"2025-02-11"},{"1":"1007810001","2":"2","3":"50044592","4":"CHICKEN, FRIES CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044605","4":"HOT DOG CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044533","4":"LEGEND'S ROOM - OA3070","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044782","4":"GLUTEN FREE AT THE GARDEN/TOP DOG/HOT DOG CONCESSIONS - FB6140 (CB6142)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044513","4":"BT4 AISLE B","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045092","4":"HOT DOG CONCESSION (FC6100)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044785","4":"FARLEY'S BAR","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044791","4":"CHICKEN, FRIES CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044784","4":"JEAN-GEORGES SIMPLY TACOS, TASTY NACHO BAR","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045101","4":"GARDEN MARKET","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044593","4":"GARDEN PUB","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044786","4":"GARDEN MARKET","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044627","4":"BEER PUB (BRIDGE PUB)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044600","4":"HOT DOG CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045071","4":"PRESS ROOM","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044624","4":"GARDEN MARKET HOT DOG CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044619","4":"GARDEN MARKET EXPRESS - FA8150","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045055","4":"GARDEN MARKET HOT DOG CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045059","4":"RAFTERS/PRIME RIB - FC6130 (CC6132)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044585","4":"BAR GARDEN","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044978","4":"EVENT LEVEL CLUB (DELTA SKY 360 BAR) BA5075","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045064","4":"KOBEYAKI/HAMBURGER CELEBRITY CHEF - FD6010","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045112","4":"GARDEN PUB","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044520","4":"GOLD BAR B BT6","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044595","4":"HOT DOG CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044537","4":"BT3 AISLE A","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044540","4":"HOT DOG CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044601","4":"CARNAGIE DELI - FB8150","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045058","4":"BAR - (BA6020)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044718","4":"BAR AT THE GARDEN (BA6110)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044626","4":"CASA NONNA PIZZA CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50089143","4":"L8 LOUNGE","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044594","4":"HOT DOG CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045069","4":"BAR (GARDEN BAR 6TH FLOOR)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044587","4":"BAR - (BD6130)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044778","4":"MIKE'S HOT HONEY - FB6060","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044623","4":"BAR","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044606","4":"THE SHACK - CB8030 (CB8040)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044857","4":"HOT DOG CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045063","4":"SUITE 200, 1879","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045109","4":"THE PRIME RIB, DUNKIN DONUTS - FA8040 (CA8041)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"40946369","4":"NICK & STEF'S STEAKHOUSE","5":"A","6":"2023-10-17"},{"1":"1007810001","2":"2","3":"50044622","4":"Daily Burger","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044612","4":"Bar at the Garden","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044602","4":"BAR AT THE GARDEN","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044590","4":"HAMBURGER, DAILY BURGER","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044522","4":"CHASE LOUNGE - 3rd Floor","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044589","4":"BAR AT THE GARDEN","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044860","4":"GARDEN MELT","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044617","4":"MIGHTY QUINN'S BBQ - FA8032 (CA8033)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044631","4":"GARDEN MARKET – HOT DOG CONCESSION (FA6050)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044599","4":"HOT DOG CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044630","4":"HOT DOG CONCESSION, GARDEN MARKET","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044616","4":"CHICKEN & FRIES","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044603","4":"PIZZA CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044475","4":"THEATER (FLY)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044588","4":"GARDEN MARKET","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044720","4":"TAO SUSHI CONCESSION/FRATELLI","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045111","4":"MADISON CLUB","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044610","4":"HOT DOG CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044717","4":"FUKU - FA6090","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044777","4":"GARDEN MARKET, DUNKIN","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044774","4":"HAMBURGER, CELEBRITY CHEF, SIMPLY VEGAN FB6030 (CB6035)","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044780","4":"PAULIE GEE'Z","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045110","4":"EMPLOYEE FEEDING","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044518","4":"GOLD BAR A BT5","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50044598","4":"HOT DOG CONCESSION","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50152180","4":"THE HUB","5":"A","6":"2025-02-01"},{"1":"1007810001","2":"2","3":"50045065","4":"MIGHTY QUINN'S BBQ/CARNEGIE DELI CONCESSIONS","5":"A","6":"2025-02-01"},{"1":"1007840080","2":"2","3":"50055399","4":"MCDONALD'S","5":"A","6":"2024-09-05"},{"1":"1007850018","2":"2","3":"50018895","4":"JUNIPER","5":"A","6":"2023-12-04"},{"1":"1007860001","2":"2","3":"50128561","4":"HARRY BAGELS","5":"Z","6":"2025-03-11"},{"1":"1007860001","2":"2","3":"50046215","4":"GREGORYS COFFEE","5":"Z","6":"2025-07-29"},{"1":"1007860001","2":"2","3":"50108977","4":"CHEF YU","5":"Z","6":"2024-08-29"},{"1":"1007860001","2":"2","3":"50046215","4":"GREGORYS COFFEE","5":"A","6":"2024-02-16"},{"1":"1007860001","2":"2","3":"50124408","4":"SOMA SALADS","5":"B","6":"2024-04-22"},{"1":"1007860001","2":"2","3":"50124408","4":"SOMA SALADS","5":"A","6":"2025-04-30"},{"1":"1007860001","2":"2","3":"50108977","4":"CHEF YU","5":"A","6":"2023-02-28"},{"1":"1008060006","2":"2","3":"50149815","4":"SEA","5":"A","6":"2024-09-03"},{"1":"1008060063","2":"2","3":"50152070","4":"FRIEDMAN'S","5":"N","6":"<NA>"},{"1":"1008220023","2":"2","3":"50107791","4":"THE GALLERY","5":"A","6":"2023-10-03"},{"1":"1008220023","2":"2","3":"50084224","4":"HALL , ODO","5":"A","6":"2023-04-22"},{"1":"1008280051","2":"2","3":"50152287","4":"PURA VIDA MIAMI","5":"A","6":"2024-09-18"},{"1":"1008290035","2":"2","3":"50004033","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2024-09-26"},{"1":"1008330011","2":"2","3":"50091117","4":"IRVING FARM NEW YORK COFFEE","5":"A","6":"2025-05-19"},{"1":"1008330011","2":"2","3":"50146113","4":"NANA'S GREEN TEA","5":"N","6":"<NA>"},{"1":"1008330011","2":"2","3":"50117121","4":"TIGER SUGAR","5":"A","6":"2024-10-03"},{"1":"1008330011","2":"2","3":"41694144","4":"GAONNURI","5":"A","6":"2024-04-02"},{"1":"1008340035","2":"2","3":"50070203","4":"FIVE SENSES","5":"A","6":"2024-06-06"},{"1":"1008340035","2":"2","3":"50040296","4":"GAMMEEOK","5":"C","6":"2024-09-03"},{"1":"1008340035","2":"2","3":"50040296","4":"GAMMEEOK","5":"B","6":"2025-04-02"},{"1":"1008370084","2":"2","3":"50162845","4":"KEENS STEAKHOUSE","5":"A","6":"2024-12-26"},{"1":"1008400087","2":"2","3":"50137913","4":"PHO 39","5":"A","6":"2024-06-21"},{"1":"1008410071","2":"2","3":"41096117","4":"KOI","5":"A","6":"2024-06-04"},{"1":"1008410071","2":"2","3":"41068567","4":"CELON BAR & LOUNGE","5":"A","6":"2024-05-16"},{"1":"1008447502","2":"2","3":"50132843","4":"KANYAKUMARI","5":"N","6":"<NA>"},{"1":"1008460069","2":"2","3":"50041812","4":"SWEETGREEN","5":"A","6":"2023-08-29"},{"1":"1008570024","2":"2","3":"50149637","4":"Ground Central","5":"A","6":"2024-05-02"},{"1":"1008570024","2":"2","3":"50123542","4":"CAFE GRUMPY","5":"A","6":"2024-11-01"},{"1":"1008620029","2":"2","3":"50012068","4":"GREGORY'S COFFEE","5":"Z","6":"2025-07-10"},{"1":"1008620029","2":"2","3":"50012068","4":"GREGORY'S COFFEE","5":"A","6":"2024-04-29"},{"1":"1008620029","2":"2","3":"50146175","4":"PRET A MANGER","5":"A","6":"2025-05-30"},{"1":"1008620029","2":"2","3":"50141833","4":"LIVUNLTD","5":"A","6":"2024-01-08"},{"1":"1008620029","2":"2","3":"50088095","4":"SWEETGREEN","5":"A","6":"2024-07-01"},{"1":"1008620029","2":"2","3":"50103600","4":"JUICE GENERATION","5":"A","6":"2024-12-16"},{"1":"1008620067","2":"2","3":"50152652","4":"HYUN","5":"A","6":"2024-12-12"},{"1":"1008707501","2":"2","3":"50134983","4":"BAYA BAR","5":"A","6":"2023-09-13"},{"1":"1008707501","2":"2","3":"50079907","4":"STICKY'S FINGER JOINT","5":"A","6":"2024-07-03"},{"1":"1008707501","2":"2","3":"50118694","4":"SUBWAY","5":"A","6":"2024-12-18"},{"1":"1008707501","2":"2","3":"41485091","4":"BRAVO PIZZA","5":"A","6":"2024-12-17"},{"1":"1008707501","2":"2","3":"41453957","4":"CHIPOTLE MEXICAN GRILL","5":"B","6":"2024-05-06"},{"1":"1008707501","2":"2","3":"41453957","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2024-10-03"},{"1":"1008707501","2":"2","3":"40602878","4":"STARBUCKS #7378","5":"A","6":"2025-08-15"},{"1":"1008710016","2":"2","3":"50087329","4":"IRVING PLAZA","5":"A","6":"2023-08-02"},{"1":"1008710016","2":"2","3":"50131905","4":"THE HIGH NOTE / POPCHEW","5":"B","6":"2024-03-26"},{"1":"1008740004","2":"2","3":"50099109","4":"OCEANS","5":"C","6":"2023-01-29"},{"1":"1008740004","2":"2","3":"50099109","4":"OCEANS","5":"A","6":"2024-05-24"},{"1":"1008740004","2":"2","3":"50137589","4":"CARLOTTO","5":"A","6":"2025-03-11"},{"1":"1008790081","2":"2","3":"50033222","4":"JUST SALAD","5":"A","6":"2025-01-13"},{"1":"1008790081","2":"2","3":"50144904","4":"COUNTER SERVICE","5":"A","6":"2024-03-18"},{"1":"1009930005","2":"2","3":"50160420","4":"ONE FIFTY FRESH PIZZA 40TH ST","5":"A","6":"2024-11-20"},{"1":"1009930029","2":"2","3":"50141497","4":"COFFEE AT BREADS BAKERY","5":"C","6":"2023-10-03"},{"1":"1009930029","2":"2","3":"50077581","4":"L'ADRESSE AMERICAN BISTRO","5":"A","6":"2025-03-27"},{"1":"1009930029","2":"2","3":"50141497","4":"COFFEE AT BREADS BAKERY","5":"A","6":"2025-01-24"},{"1":"1009930029","2":"2","3":"50128040","4":"ZUCKER'S BAGELS BRYANT PARK","5":"A","6":"2025-08-08"},{"1":"1009930029","2":"2","3":"50077581","4":"L'ADRESSE AMERICAN BISTRO","5":"B","6":"2024-04-26"},{"1":"1009930029","2":"2","3":"50080311","4":"LITTLE BEET","5":"A","6":"2024-06-26"},{"1":"1009960014","2":"2","3":"50130433","4":"MERMAID OYSTER BAR TIMES SQUARE","5":"A","6":"2024-10-23"},{"1":"1010030005","2":"2","3":"50128396","4":"TRADISYON NYC","5":"A","6":"2024-06-24"},{"1":"1010030005","2":"2","3":"50144219","4":"SUSHI BY MR LIM & THE SLING BAR","5":"A","6":"2024-06-20"},{"1":"1010030005","2":"2","3":"50124467","4":"KOPIFELLAS","5":"A","6":"2024-11-19"},{"1":"1010030005","2":"2","3":"50129964","4":"JAKARTA MUNCH","5":"B","6":"2023-01-17"},{"1":"1010030005","2":"2","3":"50129964","4":"JAKARTA MUNCH","5":"A","6":"2024-11-19"},{"1":"1010030005","2":"2","3":"50126118","4":"DUNKIN DONUTS","5":"A","6":"2025-01-29"},{"1":"1010030005","2":"2","3":"50128175","4":"PADI D' NYC","5":"B","6":"2024-09-17"},{"1":"1010030005","2":"2","3":"50146023","4":"MYSTTIK MASAALA","5":"P","6":"2025-02-21"},{"1":"1010030005","2":"2","3":"50128394","4":"LADY WONG","5":"A","6":"2024-05-06"},{"1":"1010030005","2":"2","3":"50123933","4":"HAINAN JONES","5":"A","6":"2024-06-24"},{"1":"1010030005","2":"2","3":"50128175","4":"PADI D' NYC","5":"A","6":"2022-09-27"},{"1":"1010030005","2":"2","3":"50004552","4":"THE LITTLE BEET / MELT SHOP","5":"A","6":"2025-06-05"},{"1":"1010030005","2":"2","3":"50124853","4":"PRAWNAHOLIC","5":"A","6":"2022-09-27"},{"1":"1010030005","2":"2","3":"50125452","4":"SMOKIN' JOE","5":"A","6":"2025-01-29"},{"1":"1010030005","2":"2","3":"50124853","4":"PRAWNAHOLIC","5":"C","6":"2024-11-20"},{"1":"1010030005","2":"2","3":"41236763","4":"BOBBY VAN'S GRILL","5":"B","6":"2025-02-13"},{"1":"1010030005","2":"2","3":"50124096","4":"MR FRIED RICE","5":"A","6":"2025-02-20"},{"1":"1010030005","2":"2","3":"50146023","4":"MYSTTIK MASAALA","5":"A","6":"2025-04-11"},{"1":"1010060013","2":"2","3":"50105140","4":"LA GRANDE BOUCHERIE AND KAISEKI ROOM","5":"B","6":"2023-09-18"},{"1":"1010060013","2":"2","3":"50105140","4":"LA GRANDE BOUCHERIE AND KAISEKI ROOM","5":"A","6":"2025-03-05"},{"1":"1010087502","2":"2","3":"50040890","4":"SOUVLAKI GR MIDTOWN","5":"A","6":"2025-06-03"},{"1":"1010090050","2":"2","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010117505","2":"2","3":"50146126","4":"PRET A MANGER","5":"A","6":"2025-07-30"},{"1":"1010177501","2":"2","3":"50144306","4":"ANITA GELATO","5":"A","6":"2025-07-18"},{"1":"1010180006","2":"2","3":"50157163","4":"POP EMPANADA NYC","5":"N","6":"<NA>"},{"1":"1010180006","2":"2","3":"50156348","4":"PARAMOUNT BAR","5":"A","6":"2025-05-01"},{"1":"1010180006","2":"2","3":"50075332","4":"SONY HALL","5":"A","6":"2024-06-28"},{"1":"1010180006","2":"2","3":"50146401","4":"LE PARISIEN","5":"A","6":"2025-01-30"},{"1":"1010180006","2":"2","3":"50164246","4":"TEN SECONDS YUNNAN RICE NOODLE","5":"N","6":"<NA>"},{"1":"1010180061","2":"2","3":"41191856","4":"THE MEAN FIDDLER","5":"A","6":"2023-05-02"},{"1":"1010180061","2":"2","3":"41172507","4":"CARVE UNIQUE SANDWICHES","5":"A","6":"2024-11-25"},{"1":"1010210026","2":"2","3":"40566617","4":"STARBUCKS","5":"A","6":"2024-04-23"},{"1":"1010210026","2":"2","3":"50064578","4":"JUNIOR'S RESTAURANT","5":"A","6":"2025-01-30"},{"1":"1010210026","2":"2","3":"50078026","4":"MORGAN STANLEY CAFE","5":"A","6":"2024-12-03"},{"1":"1010210026","2":"2","3":"50137811","4":"PLAYA BOWLS","5":"A","6":"2024-10-29"},{"1":"1010210026","2":"2","3":"50141096","4":"SPIN","5":"A","6":"2024-10-13"},{"1":"1010210026","2":"2","3":"50163547","4":"MR. WU DIM SUM","5":"A","6":"2025-04-23"},{"1":"1010220061","2":"2","3":"50084630","4":"POKE BOWL","5":"A","6":"2023-12-28"},{"1":"1010220061","2":"2","3":"50082966","4":"VANGUARD WINE BAR","5":"A","6":"2023-06-12"},{"1":"1010220061","2":"2","3":"50082953","4":"TACO BELL","5":"A","6":"2024-07-03"},{"1":"1010230002","2":"2","3":"50059267","4":"DIG","5":"A","6":"2022-08-31"},{"1":"1010230002","2":"2","3":"41297316","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2024-05-02"},{"1":"1010230002","2":"2","3":"50150732","4":"ROMA PIZZA","5":"N","6":"<NA>"},{"1":"1010230002","2":"2","3":"50059267","4":"DIG","5":"B","6":"2025-01-09"},{"1":"1010250025","2":"2","3":"50101773","4":"SHAKE SHACK","5":"A","6":"2024-10-15"},{"1":"1010250025","2":"2","3":"50125026","4":"BLANK STREET","5":"A","6":"2025-07-18"},{"1":"1010250025","2":"2","3":"50146163","4":"PRET A MANGER","5":"A","6":"2025-07-16"},{"1":"1010250025","2":"2","3":"50036218","4":"STARBUCKS","5":"A","6":"2024-10-30"},{"1":"1010250025","2":"2","3":"50120356","4":"CHOP & GO","5":"A","6":"2024-07-03"},{"1":"1010270020","2":"2","3":"50103878","4":"SUGARFISH BY SUSHI NOZAWA","5":"A","6":"2024-05-08"},{"1":"1010270020","2":"2","3":"50105437","4":"SWEETGREEN","5":"A","6":"2024-04-15"},{"1":"1010270020","2":"2","3":"50104886","4":"IRIS","5":"A","6":"2024-03-20"},{"1":"1010300029","2":"2","3":"50119256","4":"CAFE SERAFINA","5":"A","6":"2023-12-07"},{"1":"1010300029","2":"2","3":"50154886","4":"CHARCUTERIE BY BOHEMIAN PICNICS NYC","5":"A","6":"2025-07-28"},{"1":"1012580021","2":"2","3":"50165680","4":"BUNNY&BRO COFFEE","5":"N","6":"<NA>"},{"1":"1012580021","2":"2","3":"50137604","4":"LE BOTANISTE 100% ORGANIC PLANT-BASED FOOD","5":"A","6":"2023-08-23"},{"1":"1012580021","2":"2","3":"41722053","4":"CHOP'T","5":"A","6":"2025-03-18"},{"1":"1012580021","2":"2","3":"50083696","4":"CAVA","5":"A","6":"2024-07-01"},{"1":"1012580021","2":"2","3":"50136568","4":"PLNT BURGER","5":"N","6":"<NA>"},{"1":"1012580034","2":"2","3":"41086895","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2024-05-17"},{"1":"1012600065","2":"2","3":"50146792","4":"XI'AN FAMOUS FOODS","5":"A","6":"2025-03-17"},{"1":"1012620019","2":"2","3":"50121541","4":"NINO'S 46","5":"B","6":"2024-03-12"},{"1":"1012657501","2":"2","3":"50099379","4":"VAN LEEUWEN ICE CREAM","5":"A","6":"2024-03-08"},{"1":"1012657501","2":"2","3":"50116645","4":"CAFE GRUMPY","5":"A","6":"2025-04-23"},{"1":"1012657501","2":"2","3":"50098724","4":"SWEETGREEN","5":"A","6":"2025-08-13"},{"1":"1012657501","2":"2","3":"50010838","4":"RAINBOW ROOM","5":"A","6":"2022-09-16"},{"1":"1012657501","2":"2","3":"50116645","4":"CAFE GRUMPY","5":"C","6":"2024-04-25"},{"1":"1012657501","2":"2","3":"50010838","4":"RAINBOW ROOM","5":"B","6":"2024-12-19"},{"1":"1012657501","2":"2","3":"50107450","4":"FIELDTRIP","5":"A","6":"2022-04-27"},{"1":"1012657501","2":"2","3":"50113214","4":"CHIP CITY","5":"A","6":"2024-08-05"},{"1":"1012657501","2":"2","3":"50106822","4":"21 GREENPOINT","5":"B","6":"2023-12-18"},{"1":"1012657501","2":"2","3":"41362620","4":"MAGNOLIA BAKERY","5":"A","6":"2024-09-17"},{"1":"1012657501","2":"2","3":"50147932","4":"COOL SIPS","5":"A","6":"2024-08-05"},{"1":"1012657501","2":"2","3":"50100327","4":"FUKU","5":"A","6":"2024-05-10"},{"1":"1012657501","2":"2","3":"50149693","4":"LUKES LOBSTER","5":"A","6":"2024-08-05"},{"1":"1012657501","2":"2","3":"40404080","4":"LAZARD FRERES","5":"A","6":"2024-10-04"},{"1":"1012657501","2":"2","3":"50001895","4":"JAMBA JUICE","5":"A","6":"2024-09-20"},{"1":"1012657501","2":"2","3":"41391103","4":"DUNKIN","5":"A","6":"2024-05-02"},{"1":"1012657501","2":"2","3":"50134868","4":"PUYA","5":"Z","6":"2025-08-14"},{"1":"1012657501","2":"2","3":"50069039","4":"JUICE PRESS","5":"C","6":"2024-08-14"},{"1":"1012657501","2":"2","3":"50161275","4":"DAILY PROVISIONS","5":"A","6":"2025-04-11"},{"1":"1012657501","2":"2","3":"50048519","4":"LADY M CONFECTIONS","5":"A","6":"2024-09-20"},{"1":"1012657501","2":"2","3":"50107450","4":"FIELDTRIP","5":"C","6":"2024-04-25"},{"1":"1012657501","2":"2","3":"50139139","4":"THE TIPSY BAKER","5":"Z","6":"2025-08-15"},{"1":"1012657501","2":"2","3":"50095479","4":"BLACK SEED BAGELS","5":"A","6":"2024-06-24"},{"1":"1012657501","2":"2","3":"50166853","4":"MADRAS DOSA CO","5":"N","6":"<NA>"},{"1":"1012657501","2":"2","3":"50144652","4":"SMITH & MILLS","5":"A","6":"2025-02-13"},{"1":"1012657501","2":"2","3":"50142850","4":"The Weather Room","5":"A","6":"2025-06-25"},{"1":"1012657501","2":"2","3":"50122366","4":"THE HUB @ SHEPPARD MULLIN","5":"A","6":"2025-08-13"},{"1":"1012657501","2":"2","3":"50158528","4":"ACE'S PIZZA","5":"A","6":"2024-10-04"},{"1":"1012657501","2":"2","3":"50133304","4":"POTBELLY","5":"A","6":"2025-04-11"},{"1":"1012657501","2":"2","3":"50069039","4":"JUICE PRESS","5":"A","6":"2023-02-10"},{"1":"1012657501","2":"2","3":"50165132","4":"STARBUCKS COFFEE # 85552","5":"A","6":"2025-04-25"},{"1":"1012657501","2":"2","3":"50066830","4":"BLUE RIBBON SUSHI BAR","5":"A","6":"2023-06-21"},{"1":"1012660001","2":"2","3":"50157485","4":"BOURKE STREET BAKERY","5":"C","6":"2025-03-20"},{"1":"1012660001","2":"2","3":"41564934","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012660001","2":"2","3":"40703791","4":"STARBUCKS","5":"A","6":"2025-06-25"},{"1":"1012660001","2":"2","3":"50013293","4":"LIMANI","5":"A","6":"2024-05-06"},{"1":"1012660001","2":"2","3":"41599164","4":"DEL FRISCO'S GRILLE","5":"A","6":"2024-05-21"},{"1":"1012660001","2":"2","3":"50035219","4":"NBC CAFETERIA (11th FLR)","5":"A","6":"2024-05-10"},{"1":"1012660001","2":"2","3":"41509909","4":"BILL'S BAR & BURGER ROCKEFELLER CENTER","5":"A","6":"2024-05-21"},{"1":"1012660001","2":"2","3":"41564945","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012660001","2":"2","3":"50119497","4":"LE ROCK","5":"A","6":"2023-07-28"},{"1":"1012660001","2":"2","3":"41564956","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012660001","2":"2","3":"41564928","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012660001","2":"2","3":"50097018","4":"EQX ROCKEFELLER CAFE","5":"A","6":"2025-02-14"},{"1":"1012660001","2":"2","3":"41564948","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012660001","2":"2","3":"41071308","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012660001","2":"2","3":"41412916","4":"BEN & JERRY'S","5":"A","6":"2024-07-25"},{"1":"1012660001","2":"2","3":"41564963","4":"RADIO CITY MUSIC HALL","5":"A","6":"2018-11-09"},{"1":"1012710063","2":"2","3":"50133243","4":"POTBELLY","5":"A","6":"2024-07-03"},{"1":"1012710106","2":"2","3":"41591687","4":"PIZZARTE","5":"A","6":"2023-02-16"},{"1":"1012710106","2":"2","3":"41591687","4":"PIZZARTE","5":"B","6":"2024-12-19"},{"1":"1012740006","2":"2","3":"50100277","4":"GABRIEL'S BAR & RESTAURANT","5":"A","6":"2025-01-29"},{"1":"1012740006","2":"2","3":"50109226","4":"SIP + CO","5":"P","6":"2025-01-13"},{"1":"1012740006","2":"2","3":"50109226","4":"SIP + CO","5":"A","6":"2025-08-14"},{"1":"1012740006","2":"2","3":"41089876","4":"SARABETH'S","5":"B","6":"2024-11-25"},{"1":"1012740006","2":"2","3":"41089876","4":"SARABETH'S","5":"A","6":"2023-02-16"},{"1":"1012740006","2":"2","3":"50109226","4":"SIP + CO","5":"C","6":"2024-05-08"},{"1":"1012850036","2":"2","3":"50155703","4":"JUST SALAD","5":"A","6":"2025-02-25"},{"1":"1012850036","2":"2","3":"41242270","4":"COLGATE PALMOLIVE","5":"A","6":"2024-06-26"},{"1":"1012850036","2":"2","3":"50158624","4":"NAYA","5":"A","6":"2025-08-01"},{"1":"1012850036","2":"2","3":"50073587","4":"DUKE EATERY","5":"A","6":"2025-07-03"},{"1":"1012850036","2":"2","3":"50074889","4":"JOE & THE JUICE","5":"A","6":"2024-03-20"},{"1":"1012940046","2":"2","3":"41480022","4":"LAVO NEW YORK","5":"N","6":"<NA>"},{"1":"1013010001","2":"2","3":"50126677","4":"DOS CAMINOS","5":"A","6":"2025-08-14"},{"1":"1013010001","2":"2","3":"50001869","4":"SOCIETE GENERALE CAFETERIA","5":"A","6":"2024-02-29"},{"1":"1013010001","2":"2","3":"50083160","4":"ANGELO GORDON","5":"A","6":"2023-04-26"},{"1":"1013010001","2":"2","3":"50001867","4":"SOCIETE GENERAL","5":"A","6":"2024-09-16"},{"1":"1013030014","2":"2","3":"50048150","4":"INTERCONTINENTAL BARCLAY - BAR","5":"A","6":"2024-09-17"},{"1":"1013030014","2":"2","3":"50141233","4":"FRESH&CO","5":"A","6":"2025-05-01"},{"1":"1013030014","2":"2","3":"50048138","4":"INTERCONTINENTAL NEW YORK EMPLOYEE CAFE","5":"A","6":"2025-03-24"},{"1":"1013030014","2":"2","3":"50048146","4":"INTERCONTINENTAL BARCLAY-LOBBY RESTAURANT","5":"A","6":"2025-01-28"},{"1":"1013030014","2":"2","3":"50091227","4":"OLE & STEEN","5":"B","6":"2025-06-06"},{"1":"1013030014","2":"2","3":"50048142","4":"INTERCONTINENTAL BANQUET KITCHEN NEW YORK BARCLAY","5":"A","6":"2023-06-30"},{"1":"1013030014","2":"2","3":"50091227","4":"OLE & STEEN","5":"A","6":"2023-12-08"},{"1":"1007780033","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1007800071","2":"1","3":"50057765","4":"TIR NA NOG","5":"B","6":"2024-12-09"},{"1":"1007837501","2":"1","3":"50142256","4":"LOS TACOS NO.1","5":"A","6":"2024-02-15"},{"1":"1007840001","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1007840028","2":"1","3":"50128308","4":"CHICK-FILL-A","5":"A","6":"2025-01-08"},{"1":"1007840041","2":"1","3":"50157578","4":"DUNKIN'","5":"A","6":"2025-03-25"},{"1":"1007840064","2":"1","3":"41687345","4":"JACK DOYLES PUB & RESTAURANT","5":"A","6":"2024-05-13"},{"1":"1007840064","2":"1","3":"50140390","4":"PATIALA GRILL","5":"A","6":"2025-01-08"},{"1":"1007840064","2":"1","3":"41068607","4":"CAFE NUNEZ","5":"A","6":"2023-10-16"},{"1":"1007840064","2":"1","3":"41068607","4":"CAFE NUNEZ","5":"Z","6":"2025-07-24"},{"1":"1007850001","2":"1","3":"50084938","4":"TACO BELL CANTINA","5":"A","6":"2024-11-19"},{"1":"1007850041","2":"1","3":"50045193","4":"THE BREAD FACTORY CAFE","5":"B","6":"2025-01-21"},{"1":"1007850041","2":"1","3":"50045193","4":"THE BREAD FACTORY CAFE","5":"C","6":"2022-12-02"},{"1":"1007850041","2":"1","3":"41460700","4":"PIG 'N' WHISTLE","5":"C","6":"2024-03-14"},{"1":"1007850082","2":"1","3":"50164189","4":"DUDE'S PIZZA","5":"N","6":"<NA>"},{"1":"1007850082","2":"1","3":"50142166","4":"JURIN SUSHI","5":"N","6":"<NA>"},{"1":"1007860076","2":"1","3":"50148102","4":"MEL & TOAST","5":"N","6":"<NA>"},{"1":"1007880001","2":"1","3":"50006741","4":"GRACE CAFE","5":"B","6":"2023-02-10"},{"1":"1007880001","2":"1","3":"50006741","4":"GRACE CAFE","5":"A","6":"2024-11-27"},{"1":"1007880001","2":"1","3":"50096582","4":"WOK TO WALK, LOS TACOS HERMANOS, POKE BOWL, SAKURA OF JAPAN","5":"B","6":"2022-09-14"},{"1":"1007880001","2":"1","3":"50096582","4":"WOK TO WALK, LOS TACOS HERMANOS, POKE BOWL, SAKURA OF JAPAN","5":"C","6":"2025-01-02"},{"1":"1007890044","2":"1","3":"50047324","4":"LENWICH","5":"A","6":"2024-08-13"},{"1":"1007890062","2":"1","3":"50121449","4":"TACO BELL CANTINA","5":"A","6":"2024-07-26"},{"1":"1007890062","2":"1","3":"41243427","4":"DUNKIN'","5":"A","6":"2025-01-28"},{"1":"1007890062","2":"1","3":"50128563","4":"BAGEL TO SANDWICH","5":"A","6":"2024-11-07"},{"1":"1007890062","2":"1","3":"41243427","4":"DUNKIN'","5":"C","6":"2024-07-25"},{"1":"1007890062","2":"1","3":"50148984","4":"POPEYES","5":"A","6":"2024-05-08"},{"1":"1007890062","2":"1","3":"50124164","4":"DIM SUM SAM","5":"Z","6":"2025-04-28"},{"1":"1007890075","2":"1","3":"50172581","4":"BAGEL MARKET NEW YORK","5":"N","6":"<NA>"},{"1":"1007890075","2":"1","3":"50123936","4":"BAGEL MARKET","5":"A","6":"2025-01-13"},{"1":"1007890075","2":"1","3":"50102295","4":"GREEK XPRESS","5":"A","6":"2025-07-21"},{"1":"1007890082","2":"1","3":"50053321","4":"KUNGFU KITCHEN","5":"A","6":"2024-05-07"},{"1":"1007890082","2":"1","3":"50053321","4":"KUNGFU KITCHEN","5":"B","6":"2022-11-28"},{"1":"1007890082","2":"1","3":"50160862","4":"Kung Fu Kitchen","5":"A","6":"2025-04-04"},{"1":"1008020001","2":"1","3":"41137141","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2025-07-21"},{"1":"1008020001","2":"1","3":"50159891","4":"SUBWAY","5":"N","6":"<NA>"},{"1":"1008027502","2":"1","3":"50134429","4":"EMPEROR DUMPLING","5":"A","6":"2023-05-09"},{"1":"1008027502","2":"1","3":"50134429","4":"EMPEROR DUMPLING","5":"C","6":"2025-06-30"},{"1":"1008027502","2":"1","3":"50050507","4":"JUST SALAD","5":"A","6":"2024-12-23"},{"1":"1008030004","2":"1","3":"50129827","4":"CAVA MEZZE GRILL","5":"A","6":"2024-07-02"},{"1":"1008030031","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008040032","2":"1","3":"50088516","4":"FEROCE & THE FLEUR ROOM","5":"A","6":"2024-05-16"},{"1":"1008040032","2":"1","3":"50088516","4":"FEROCE & THE FLEUR ROOM","5":"B","6":"2022-12-14"},{"1":"1008050094","2":"1","3":"50137730","4":"ALLIGATOR PEAR","5":"A","6":"2025-05-29"},{"1":"1008060058","2":"1","3":"50073709","4":"ICHIRAN","5":"A","6":"2024-07-30"},{"1":"1008060058","2":"1","3":"41703804","4":"PENNSYLVANIA 6","5":"A","6":"2024-11-12"},{"1":"1008070062","2":"1","3":"50144305","4":"ROWDY ROOSTER","5":"C","6":"2024-02-15"},{"1":"1008070062","2":"1","3":"50110719","4":"SAM WOO JUNG","5":"A","6":"2023-10-17"},{"1":"1008077502","2":"1","3":"50146158","4":"PRET A MANGER","5":"A","6":"2025-08-01"},{"1":"1008077502","2":"1","3":"50089387","4":"ESS-A-BAGEL","5":"A","6":"2025-06-09"},{"1":"1008077502","2":"1","3":"50107752","4":"FIVE IRON GOLF","5":"A","6":"2024-06-03"},{"1":"1008090003","2":"1","3":"50113372","4":"ROSA'S PIZZA","5":"A","6":"2025-03-11"},{"1":"1008090082","2":"1","3":"50140856","4":"OLIYO","5":"B","6":"2024-09-10"},{"1":"1008100001","2":"1","3":"50095005","4":"ZARO'S FAMILY BAKERY","5":"A","6":"2024-08-14"},{"1":"1008100001","2":"1","3":"50045332","4":"ROWLAND'S BAR AND GRILL","5":"A","6":"2024-04-18"},{"1":"1008100001","2":"1","3":"50119974","4":"MCDONALD'S RESTAURANT","5":"A","6":"2025-04-03"},{"1":"1008100001","2":"1","3":"41709760","4":"STELLA 34","5":"A","6":"2024-01-08"},{"1":"1008100001","2":"1","3":"50002119","4":"STARBUCKS","5":"A","6":"2024-06-18"},{"1":"1008100001","2":"1","3":"50017041","4":"JUST SALAD","5":"A","6":"2024-10-16"},{"1":"1008100001","2":"1","3":"50091389","4":"AUNTIE ANNE'S PRETZELS, CARVEL","5":"B","6":"2024-01-18"},{"1":"1008100001","2":"1","3":"50091389","4":"AUNTIE ANNE'S PRETZELS, CARVEL","5":"A","6":"2025-04-03"},{"1":"1008100001","2":"1","3":"50089071","4":"NYC PIZZA","5":"A","6":"2024-07-10"},{"1":"1008117501","2":"1","3":"50092211","4":"GREEK FROM GREECE","5":"A","6":"2024-04-11"},{"1":"1008130023","2":"1","3":"50146006","4":"PISILLO ITALIAN PANINI","5":"A","6":"2024-11-07"},{"1":"1008130023","2":"1","3":"50135609","4":"TAIM MEDITERRANEAN KITCHEN","5":"A","6":"2024-01-30"},{"1":"1008130023","2":"1","3":"50146223","4":"ONGI KOREAN GRILL (ENTRANCE ON W 37TH ST)","5":"A","6":"2025-03-13"},{"1":"1008130023","2":"1","3":"50163294","4":"ADOBO MEXICAN GRILL","5":"N","6":"<NA>"},{"1":"1008130038","2":"1","3":"50132602","4":"SOPHIES CUBAN CUISINE","5":"A","6":"2024-11-18"},{"1":"1008140015","2":"1","3":"50072059","4":"DIG INN","5":"A","6":"2024-12-03"},{"1":"1008140015","2":"1","3":"50062470","4":"DELGADO'S CANDY STORE","5":"A","6":"2023-05-11"},{"1":"1008140015","2":"1","3":"50068109","4":"LUKE'S LOBSTER","5":"A","6":"2023-10-05"},{"1":"1008140015","2":"1","3":"50125786","4":"INDAY","5":"A","6":"2024-12-19"},{"1":"1008140015","2":"1","3":"50149967","4":"SUSHI & CO","5":"A","6":"2025-06-17"},{"1":"1008140015","2":"1","3":"50063197","4":"JUICE GENERATION","5":"A","6":"2025-05-29"},{"1":"1008140015","2":"1","3":"50145129","4":"HEYTEA","5":"A","6":"2024-05-21"},{"1":"1008140015","2":"1","3":"50065931","4":"MIGHTY QUINN'S BBQ","5":"A","6":"2025-07-17"},{"1":"1008140015","2":"1","3":"50062470","4":"DELGADO'S CANDY STORE","5":"Z","6":"2025-08-06"},{"1":"1008140052","2":"1","3":"50132209","4":"POKE BOWL","5":"A","6":"2024-02-29"},{"1":"1008140052","2":"1","3":"50146139","4":"PRET A MANGER","5":"C","6":"2024-05-21"},{"1":"1008140052","2":"1","3":"50143570","4":"MIZNON","5":"C","6":"2025-04-30"},{"1":"1008140052","2":"1","3":"50097395","4":"ARTICHOKE BASILLE'S PIZZA","5":"B","6":"2021-10-19"},{"1":"1008140052","2":"1","3":"50097395","4":"ARTICHOKE BASILLE'S PIZZA","5":"A","6":"2024-05-13"},{"1":"1008140052","2":"1","3":"50118553","4":"TEN THOUSAND","5":"A","6":"2024-11-29"},{"1":"1008140052","2":"1","3":"50124026","4":"BARNEY BROWN","5":"A","6":"2025-07-07"},{"1":"1008140052","2":"1","3":"50146139","4":"PRET A MANGER","5":"A","6":"2025-07-02"},{"1":"1008160013","2":"1","3":"50082484","4":"TEAZZI TEA SHOP","5":"A","6":"2024-07-23"},{"1":"1008160013","2":"1","3":"50093616","4":"GOLDEN KRUST CARIBBEAN BAKERY & GRILL","5":"A","6":"2025-04-08"},{"1":"1008160013","2":"1","3":"50093616","4":"GOLDEN KRUST CARIBBEAN BAKERY & GRILL","5":"C","6":"2024-10-29"},{"1":"1008177503","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008180001","2":"1","3":"41034539","4":"HOLLYWOOD DINER","5":"A","6":"2024-07-17"},{"1":"1008220001","2":"1","3":"50154816","4":"LIMELIGHT COAL FRIED PIZZA","5":"B","6":"2025-01-27"},{"1":"1008220001","2":"1","3":"50045254","4":"JUE LAN CLUB","5":"A","6":"2023-05-09"},{"1":"1008220001","2":"1","3":"50045254","4":"JUE LAN CLUB","5":"Z","6":"2025-08-14"},{"1":"1008230029","2":"1","3":"41580537","4":"TRATTORIA ZERO OTTO NOVE II","5":"Z","6":"2024-07-24"},{"1":"1008230029","2":"1","3":"50065499","4":"COTE KOREAN STEAKHOUSE","5":"A","6":"2024-05-29"},{"1":"1008230029","2":"1","3":"41580537","4":"TRATTORIA ZERO OTTO NOVE II","5":"A","6":"2023-04-11"},{"1":"1008230062","2":"1","3":"50089381","4":"HONEYBRAINS","5":"A","6":"2025-07-01"},{"1":"1008230076","2":"1","3":"50046291","4":"BITE","5":"A","6":"2024-07-03"},{"1":"1008230082","2":"1","3":"50117995","4":"MCDONALD'S","5":"A","6":"2024-10-15"},{"1":"1008240011","2":"1","3":"50108893","4":"LIFE CAFE","5":"A","6":"2023-04-21"},{"1":"1008240011","2":"1","3":"50108893","4":"LIFE CAFE","5":"B","6":"2025-01-09"},{"1":"1008240011","2":"1","3":"50098479","4":"PARIS BAGUETTE","5":"A","6":"2024-08-29"},{"1":"1008240011","2":"1","3":"50108893","4":"LIFE CAFE","5":"Z","6":"2025-03-28"},{"1":"1008240011","2":"1","3":"50095781","4":"CHICK-FIL-A","5":"A","6":"2024-10-10"},{"1":"1008240046","2":"1","3":"50145219","4":"LAVA SHAWARMA","5":"N","6":"<NA>"},{"1":"1008240051","2":"1","3":"40994221","4":"MANGIA","5":"A","6":"2023-10-10"},{"1":"1008270049","2":"1","3":"50133332","4":"NAYA","5":"N","6":"<NA>"},{"1":"1008270049","2":"1","3":"50041097","4":"INDAY","5":"A","6":"2024-08-27"},{"1":"1008270049","2":"1","3":"50035353","4":"LA PECORA BIANCA","5":"A","6":"2024-05-09"},{"1":"1008270064","2":"1","3":"41240424","4":"HILL COUNTRY","5":"A","6":"2025-01-27"},{"1":"1008280028","2":"1","3":"50124238","4":"PLNT BURGER","5":"A","6":"2024-11-08"},{"1":"1008290007","2":"1","3":"50117776","4":"SEEYAMAÑANA","5":"Z","6":"2025-08-12"},{"1":"1008290007","2":"1","3":"50153601","4":"SEOUL BAP","5":"N","6":"<NA>"},{"1":"1008290007","2":"1","3":"50117776","4":"SEEYAMAÑANA","5":"C","6":"2023-01-10"},{"1":"1008290007","2":"1","3":"50072638","4":"PATENT COFFEE","5":"B","6":"2022-12-01"},{"1":"1008290007","2":"1","3":"50072638","4":"PATENT COFFEE","5":"P","6":"2025-05-21"},{"1":"1008290007","2":"1","3":"50072638","4":"PATENT COFFEE","5":"A","6":"2023-08-28"},{"1":"1008290007","2":"1","3":"50072638","4":"PATENT COFFEE","5":"Z","6":"2025-08-07"},{"1":"1008290011","2":"1","3":"50059980","4":"OSCAR WILDE'S","5":"A","6":"2024-11-19"},{"1":"1008290072","2":"1","3":"50154925","4":"i-TASTE EXPRESS","5":"A","6":"2025-04-02"},{"1":"1008300003","2":"1","3":"50118644","4":"EMPEROR DUMPLING","5":"A","6":"2024-03-14"},{"1":"1008300003","2":"1","3":"50118644","4":"EMPEROR DUMPLING","5":"Z","6":"2025-07-02"},{"1":"1008300003","2":"1","3":"50118322","4":"ANDIAMO PIZZA","5":"A","6":"2025-01-02"},{"1":"1008300030","2":"1","3":"50057977","4":"KAZUNORI","5":"A","6":"2024-10-01"},{"1":"1008307503","2":"1","3":"50163249","4":"ZAYTINYA & IN ROOM DINING","5":"A","6":"2025-07-31"},{"1":"1008307503","2":"1","3":"50163258","4":"BAZAAR BAR","5":"A","6":"2025-07-31"},{"1":"1008307503","2":"1","3":"50126935","4":"Employee Dining Room; Banquel Floors 3, 5","5":"A","6":"2024-04-12"},{"1":"1008307503","2":"1","3":"50120121","4":"ZAYTINYA","5":"A","6":"2023-01-27"},{"1":"1008307503","2":"1","3":"50133516","4":"THE BAZAAR DINING ROOM BY JOSE ANDRE","5":"A","6":"2025-07-31"},{"1":"1008307503","2":"1","3":"50120121","4":"ZAYTINYA","5":"C","6":"2024-11-15"},{"1":"1008307503","2":"1","3":"50126938","4":"NUBELUZ","5":"A","6":"2025-07-31"},{"1":"1008307503","2":"1","3":"50126937","4":"CLUB LOUNGE","5":"A","6":"2025-07-31"},{"1":"1008330001","2":"1","3":"50141699","4":"FRESH PIZZA & DELI","5":"A","6":"2023-09-25"},{"1":"1008330001","2":"1","3":"50141699","4":"FRESH PIZZA & DELI","5":"Z","6":"2025-07-17"},{"1":"1008330001","2":"1","3":"50149782","4":"SENDO","5":"N","6":"<NA>"},{"1":"1008330010","2":"1","3":"50137313","4":"BITES OF XIAN","5":"A","6":"2024-11-14"},{"1":"1008330018","2":"1","3":"50126705","4":"5 BAR KARAOKE","5":"N","6":"<NA>"},{"1":"1008330044","2":"1","3":"50073839","4":"GOPCHANG STORY NY","5":"A","6":"2024-05-15"},{"1":"1008330044","2":"1","3":"50073839","4":"GOPCHANG STORY NY","5":"B","6":"2022-12-27"},{"1":"1008330044","2":"1","3":"50098079","4":"JOOMAK BANJUM","5":"A","6":"2023-11-08"},{"1":"1008330047","2":"1","3":"50099576","4":"KOKU RAMEN","5":"A","6":"2024-08-19"},{"1":"1008330047","2":"1","3":"50145297","4":"KARAOKE K","5":"N","6":"<NA>"},{"1":"1008330047","2":"1","3":"50061298","4":"ABIKO CURRY","5":"B","6":"2023-10-30"},{"1":"1008330047","2":"1","3":"50061298","4":"ABIKO CURRY","5":"Z","6":"2025-08-12"},{"1":"1008330047","2":"1","3":"50096314","4":"E-MO KIMBOB","5":"A","6":"2024-12-09"},{"1":"1008330047","2":"1","3":"50007965","4":"KUSHI KUSHI YAKI","5":"A","6":"2024-12-02"},{"1":"1008330047","2":"1","3":"50012532","4":"KRUSH","5":"A","6":"2022-12-14"},{"1":"1008330047","2":"1","3":"50049724","4":"Sorimmara","5":"A","6":"2024-11-19"},{"1":"1008330047","2":"1","3":"50061298","4":"ABIKO CURRY","5":"A","6":"2022-09-29"},{"1":"1008330052","2":"1","3":"50032798","4":"GONG CHA","5":"C","6":"2024-12-19"},{"1":"1008330052","2":"1","3":"50032798","4":"GONG CHA","5":"A","6":"2023-05-24"},{"1":"1008330052","2":"1","3":"41280221","4":"WOORIJIP","5":"A","6":"2025-05-16"},{"1":"1008330062","2":"1","3":"50050424","4":"THE MAZE","5":"A","6":"2024-05-01"},{"1":"1008330062","2":"1","3":"50017701","4":"THE KUNJIP","5":"A","6":"2024-08-20"},{"1":"1008330063","2":"1","3":"50013238","4":"SPACE BILLARD","5":"A","6":"2024-10-15"},{"1":"1008330063","2":"1","3":"41454384","4":"K TOWN POHCA","5":"A","6":"2024-07-31"},{"1":"1008330063","2":"1","3":"50082812","4":"SPACE KARAOKE","5":"A","6":"2024-05-15"},{"1":"1008330063","2":"1","3":"50055651","4":"TURNTABLE LP BAR","5":"A","6":"2023-11-02"},{"1":"1008330063","2":"1","3":"41617076","4":"THE SPOT KARAOKE LOUNGE","5":"A","6":"2023-12-05"},{"1":"1008340028","2":"1","3":"41485097","4":"NEW WONJO","5":"A","6":"2024-06-18"},{"1":"1008340028","2":"1","3":"50086208","4":"ANYTIME KITCHEN","5":"A","6":"2024-01-02"},{"1":"1008340028","2":"1","3":"50086207","4":"ANYTIME KARAOKE","5":"A","6":"2024-04-02"},{"1":"1008340033","2":"1","3":"50082140","4":"KOBEQUE","5":"A","6":"2024-11-14"},{"1":"1008340033","2":"1","3":"50082146","4":"SWEET CHURROS","5":"A","6":"2024-10-16"},{"1":"1008340033","2":"1","3":"50082139","4":"ROLL & KATSU KITCHEN","5":"A","6":"2024-08-22"},{"1":"1008340033","2":"1","3":"50082132","4":"MAMA","5":"A","6":"2024-10-16"},{"1":"1008340033","2":"1","3":"50082140","4":"KOBEQUE","5":"C","6":"2022-02-22"},{"1":"1008340033","2":"1","3":"41667050","4":"MARU","5":"A","6":"2024-11-20"},{"1":"1008340033","2":"1","3":"50082152","4":"PELICANA CHICKEN","5":"A","6":"2023-10-30"},{"1":"1008340033","2":"1","3":"50082148","4":"SEOUL","5":"A","6":"2025-05-29"},{"1":"1008340033","2":"1","3":"50082136","4":"HANOK KOREA HOUSE","5":"A","6":"2023-05-16"},{"1":"1008340033","2":"1","3":"50082144","4":"JIAN BING MAN","5":"A","6":"2024-12-09"},{"1":"1008340033","2":"1","3":"50082137","4":"GOCHUJANG","5":"A","6":"2024-10-16"},{"1":"1008340033","2":"1","3":"50082149","4":"NOONA NOODLES","5":"A","6":"2024-11-14"},{"1":"1008340033","2":"1","3":"50082141","4":"KUNG FU TEA","5":"A","6":"2025-07-17"},{"1":"1008340033","2":"1","3":"50082136","4":"HANOK KOREA HOUSE","5":"Z","6":"2025-08-05"},{"1":"1008340048","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008350041","2":"1","3":"50075407","4":"JUICE PRESS","5":"C","6":"2024-12-17"},{"1":"1008350041","2":"1","3":"50072348","4":"TACOMBI","5":"A","6":"2025-04-23"},{"1":"1008350041","2":"1","3":"50060390","4":"CHOP'T","5":"A","6":"2024-09-16"},{"1":"1008350041","2":"1","3":"50120494","4":"LINKEDIN COFFEE","5":"A","6":"2025-04-07"},{"1":"1008350041","2":"1","3":"50051486","4":"STATE GRILL AND BAR","5":"A","6":"2023-10-19"},{"1":"1008350041","2":"1","3":"50129173","4":"STARBUCKS RESERVE","5":"B","6":"2024-09-16"},{"1":"1008350041","2":"1","3":"50112468","4":"CHIPOTLE MEXICAN GRILL #3641uy;","5":"A","6":"2025-07-25"},{"1":"1008350041","2":"1","3":"50150605","4":"GHIRARDELLI","5":"A","6":"2025-04-23"},{"1":"1008350041","2":"1","3":"50071615","4":"Bon Appetit","5":"A","6":"2024-05-30"},{"1":"1008350041","2":"1","3":"50129173","4":"STARBUCKS RESERVE","5":"A","6":"2022-11-15"},{"1":"1008350041","2":"1","3":"50075407","4":"JUICE PRESS","5":"A","6":"2022-12-27"},{"1":"1008350063","2":"1","3":"50114205","4":"AI KI YA","5":"B","6":"2023-10-25"},{"1":"1008360043","2":"1","3":"50144631","4":"JULIETTA GELATO CAFE","5":"A","6":"2025-07-18"},{"1":"1008370012","2":"1","3":"40390696","4":"HAN BAT RESTAURANT","5":"A","6":"2024-03-12"},{"1":"1008370012","2":"1","3":"40854979","4":"HYO DONG GAK","5":"C","6":"2024-11-12"},{"1":"1008370012","2":"1","3":"50114301","4":"CHO DANG GOL","5":"B","6":"2023-09-25"},{"1":"1008370012","2":"1","3":"50114301","4":"CHO DANG GOL","5":"A","6":"2025-07-17"},{"1":"1008370012","2":"1","3":"50001312","4":"MEW","5":"A","6":"2025-04-14"},{"1":"1008370012","2":"1","3":"40854979","4":"HYO DONG GAK","5":"A","6":"2025-04-14"},{"1":"1008370019","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008370077","2":"1","3":"50110101","4":"PIO BAGEL","5":"A","6":"2025-07-02"},{"1":"1008380001","2":"1","3":"50142187","4":"ROMA PIZZA","5":"A","6":"2024-04-02"},{"1":"1008380001","2":"1","3":"50102319","4":"KRISPY KREME","5":"A","6":"2025-07-03"},{"1":"1008380001","2":"1","3":"50099626","4":"I MILKY","5":"A","6":"2024-04-22"},{"1":"1008380001","2":"1","3":"50163690","4":"PARIS BAGUETTE","5":"A","6":"2025-07-30"},{"1":"1008380001","2":"1","3":"50129420","4":"SUSHI & CO","5":"A","6":"2023-08-08"},{"1":"1008380001","2":"1","3":"50165152","4":"SANMIWAGO","5":"N","6":"<NA>"},{"1":"1008380001","2":"1","3":"50140953","4":"OAKBERRY","5":"A","6":"2024-12-30"},{"1":"1008380012","2":"1","3":"41702685","4":"THE KEG ROOM","5":"A","6":"2023-05-19"},{"1":"1008387503","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008390008","2":"1","3":"50112960","4":"CAFE CHINA","5":"A","6":"2024-11-19"},{"1":"1008390070","2":"1","3":"50144492","4":"XI'AN EXPRESS","5":"N","6":"<NA>"},{"1":"1008390070","2":"1","3":"50139134","4":"KATSU SUSHI","5":"A","6":"2023-08-29"},{"1":"1008390070","2":"1","3":"50131256","4":"COZY RICE","5":"A","6":"2025-06-18"},{"1":"1008390070","2":"1","3":"50153807","4":"KUNG FU TEA","5":"N","6":"<NA>"},{"1":"1008397502","2":"1","3":"50158564","4":"CITY SCOOPS","5":"N","6":"<NA>"},{"1":"1008397502","2":"1","3":"41511427","4":"CULTURE ESPRESSO","5":"A","6":"2024-10-18"},{"1":"1008397502","2":"1","3":"50136655","4":"PIZZA TOWN","5":"A","6":"2024-11-18"},{"1":"1008400004","2":"1","3":"50142290","4":"BURGER MANIA","5":"A","6":"2024-08-07"},{"1":"1008400004","2":"1","3":"50119003","4":"PEPPERCORN STATION","5":"N","6":"<NA>"},{"1":"1008400006","2":"1","3":"50000880","4":"PARKER & QUINN","5":"A","6":"2024-07-23"},{"1":"1008400006","2":"1","3":"50001916","4":"WINNIE'S JAZZ BAR","5":"A","6":"2024-10-08"},{"1":"1008400006","2":"1","3":"50001915","4":"REFINERY ROOFTOP","5":"A","6":"2024-11-20"},{"1":"1008400013","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008400016","2":"1","3":"50110619","4":"SPYGLASS ROOFTOP BAR","5":"A","6":"2024-10-02"},{"1":"1008400016","2":"1","3":"50110616","4":"AVA SOCIAL","5":"A","6":"2024-11-29"},{"1":"1008410066","2":"1","3":"50004028","4":"CHIPOTLE MEXICAN GRILL","5":"A","6":"2025-07-15"},{"1":"1008410070","2":"1","3":"50000068","4":"LADY M BRYANT PARK","5":"A","6":"2025-08-12"},{"1":"1008417501","2":"1","3":"50148326","4":"TALEA BEER CO.","5":"N","6":"<NA>"},{"1":"1008417501","2":"1","3":"50082373","4":"BRANCH TERRACE & LOUNGE","5":"A","6":"2024-06-05"},{"1":"1008417501","2":"1","3":"50102084","4":"LA PECORA BIANCA","5":"A","6":"2024-12-03"},{"1":"1008420007","2":"1","3":"50033839","4":"SUBWAY","5":"A","6":"2025-08-12"},{"1":"1008420007","2":"1","3":"50063050","4":"PRESSED JUICERY","5":"A","6":"2025-07-15"},{"1":"1008420007","2":"1","3":"50131084","4":"JOOY TEA SHOPPE","5":"A","6":"2025-01-07"},{"1":"1008420007","2":"1","3":"50002623","4":"LE CAFE COFFEE","5":"A","6":"2024-11-25"},{"1":"1008430022","2":"1","3":"50060922","4":"POKEWORKS","5":"A","6":"2025-05-20"},{"1":"1008430022","2":"1","3":"50060922","4":"POKEWORKS","5":"B","6":"2023-02-24"},{"1":"1008437501","2":"1","3":"41148766","4":"15 EAST @ TOCQUEVILLE","5":"A","6":"2023-06-20"},{"1":"1008440017","2":"1","3":"50051545","4":"TSURUTONTAN UDON NOODLE BRASSERIE","5":"A","6":"2025-04-30"},{"1":"1008440017","2":"1","3":"50051545","4":"TSURUTONTAN UDON NOODLE BRASSERIE","5":"C","6":"2023-04-03"},{"1":"1008470016","2":"1","3":"50124570","4":"BARI BODEGA","5":"A","6":"2024-07-12"},{"1":"1008470016","2":"1","3":"50149460","4":"COCOA STORE NYC","5":"A","6":"2024-12-02"},{"1":"1008470016","2":"1","3":"50087902","4":"OLE & STEEN","5":"A","6":"2023-12-18"},{"1":"1008470016","2":"1","3":"50087902","4":"OLE & STEEN","5":"Z","6":"2025-07-17"},{"1":"1008470016","2":"1","3":"41130819","4":"TARALLUCCI E VINO","5":"A","6":"2024-08-20"},{"1":"1008470027","2":"1","3":"50119855","4":"ABC KITCHEN","5":"A","6":"2024-04-01"},{"1":"1008470027","2":"1","3":"50122721","4":"ABC COCINA / ABC V","5":"A","6":"2024-04-01"},{"1":"1008470062","2":"1","3":"41106233","4":"ROSA MEXICANO","5":"B","6":"2024-04-16"},{"1":"1008470062","2":"1","3":"41106233","4":"ROSA MEXICANO","5":"A","6":"2022-03-01"},{"1":"1008480059","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008500011","2":"1","3":"50131933","4":"JOE & THE JUICE","5":"A","6":"2024-10-17"},{"1":"1008500064","2":"1","3":"50143947","4":"COQODAQ","5":"N","6":"<NA>"},{"1":"1008510041","2":"1","3":"40549610","4":"STARBUCKS #7277","5":"A","6":"2025-07-28"},{"1":"1008510041","2":"1","3":"41420036","4":"SPIN NEW YORK","5":"A","6":"2024-10-03"},{"1":"1008510041","2":"1","3":"50135413","4":"NAYA","5":"A","6":"2024-11-07"},{"1":"1008510055","2":"1","3":"50118593","4":"DIM SUM SAM","5":"A","6":"2025-01-30"},{"1":"1008510060","2":"1","3":"41653607","4":"CHOP'T","5":"B","6":"2022-09-21"},{"1":"1008510060","2":"1","3":"41653607","4":"CHOP'T","5":"A","6":"2025-01-15"},{"1":"1008510061","2":"1","3":"50033747","4":"DIG INN","5":"A","6":"2024-05-29"},{"1":"1008517501","2":"1","3":"50119699","4":"GUMPTION COFFEE","5":"A","6":"2025-02-19"},{"1":"1008530001","2":"1","3":"50034065","4":"CLOCKTOWER","5":"A","6":"2024-07-03"},{"1":"1008530001","2":"1","3":"50034494","4":"NY EDITION HOTEL","5":"A","6":"2025-04-29"},{"1":"1008570007","2":"1","3":"50080759","4":"BENNO","5":"A","6":"2020-01-28"},{"1":"1008570007","2":"1","3":"50161164","4":"NINEPIN CAFE","5":"A","6":"2025-04-08"},{"1":"1008570007","2":"1","3":"50080739","4":"BAR BENNO","5":"A","6":"2020-01-21"},{"1":"1008570007","2":"1","3":"50149851","4":"THE TUSK BAR","5":"Z","6":"2025-04-03"},{"1":"1008580032","2":"1","3":"50051129","4":"ATOBOY","5":"A","6":"2024-01-30"},{"1":"1008580032","2":"1","3":"50051129","4":"ATOBOY","5":"B","6":"2022-02-23"},{"1":"1008597504","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008610064","2":"1","3":"50056647","4":"FIVE GUYS FAMOUS BURGERS AND FRIES","5":"A","6":"2024-01-09"},{"1":"1008610064","2":"1","3":"50056649","4":"FIELDS GOOD CHICKEN","5":"A","6":"2024-06-24"},{"1":"1008610075","2":"1","3":"50120453","4":"NUBIANI","5":"A","6":"2024-09-13"},{"1":"1008610075","2":"1","3":"50121603","4":"HOKKAIDO BAKED CHEESE TART","5":"A","6":"2025-01-02"},{"1":"1008610075","2":"1","3":"50132240","4":"SUNDAES BEST","5":"A","6":"2025-04-29"},{"1":"1008610075","2":"1","3":"50005710","4":"SOJU HAUS","5":"A","6":"2022-10-26"},{"1":"1008610075","2":"1","3":"41695322","4":"GINSENG MUSEUM CAFE","5":"A","6":"2024-02-20"},{"1":"1008620013","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008620025","2":"1","3":"50134488","4":"MOONO","5":"A","6":"2024-01-30"},{"1":"1008627501","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008630024","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008637501","2":"1","3":"50127097","4":"THE AINSWORTH MIDTOWN","5":"C","6":"2023-08-15"},{"1":"1008650067","2":"1","3":"41239831","4":"SLATTERY'S MIDTOWN PUB","5":"A","6":"2024-07-29"},{"1":"1008660067","2":"1","3":"50144392","4":"LUNAR","5":"A","6":"2025-07-28"},{"1":"1008660067","2":"1","3":"50141144","4":"UNREGULAR PIZZA","5":"A","6":"2024-08-14"},{"1":"1008670012","2":"1","3":"50159689","4":"CHILI","5":"Z","6":"2024-12-02"},{"1":"1008680072","2":"1","3":"50074855","4":"JUST SALAD","5":"A","6":"2024-07-01"},{"1":"1008680072","2":"1","3":"50129947","4":"LITTLE ITALY PIZZA","5":"A","6":"2025-07-01"},{"1":"1008690061","2":"1","3":"50103438","4":"CAVA MEZZE GRILL","5":"A","6":"2024-05-01"},{"1":"1008690061","2":"1","3":"50018146","4":"GREGORY'S COFFEE","5":"A","6":"2024-08-14"},{"1":"1008690061","2":"1","3":"50114171","4":"UPSIDE PIZZA","5":"A","6":"2024-05-24"},{"1":"1008730015","2":"1","3":"50009923","4":"DEAR IRVING","5":"A","6":"2024-09-12"},{"1":"1008730015","2":"1","3":"50105696","4":"L'AMERICANA","5":"A","6":"2024-07-09"},{"1":"1008730015","2":"1","3":"50122996","4":"MARTINY'S","5":"A","6":"2025-04-23"},{"1":"1008730015","2":"1","3":"50105696","4":"L'AMERICANA","5":"C","6":"2023-01-31"},{"1":"1008730015","2":"1","3":"41283023","4":"PIERRE LOTI CAFE WINE BAR","5":"A","6":"2024-09-12"},{"1":"1008740010","2":"1","3":"50085326","4":"GUPSHUP","5":"N","6":"<NA>"},{"1":"1008750001","2":"1","3":"50056945","4":"UNION SQUARE CAFE/ DAILY PROVISIONS","5":"A","6":"2025-05-29"},{"1":"1008780001","2":"1","3":"50103016","4":"THE HAWKSMOOR","5":"A","6":"2024-05-01"},{"1":"1008780069","2":"1","3":"50115700","4":"WENDY'S","5":"A","6":"2024-08-07"},{"1":"1008790015","2":"1","3":"50117964","4":"BLANK STREET COFFEE","5":"A","6":"2024-07-09"},{"1":"1008790015","2":"1","3":"50087347","4":"Gramacy Theater","5":"B","6":"2019-08-30"},{"1":"1008800004","2":"1","3":"50131611","4":"STRETCH PIZZA","5":"A","6":"2023-11-15"},{"1":"1008800073","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008830071","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1008830074","2":"1","3":"41627217","4":"ANJAPPAR","5":"A","6":"2023-11-21"},{"1":"1008870010","2":"1","3":"50147434","4":"EVA'S CINCO DE MAYO","5":"A","6":"2024-03-05"},{"1":"1009930022","2":"1","3":"50119706","4":"DOS TOROS","5":"A","6":"2024-12-19"},{"1":"1009930022","2":"1","3":"50128018","4":"GLAZE BRYANT PARK","5":"A","6":"2025-07-15"},{"1":"1009930022","2":"1","3":"50118259","4":"MAMAN","5":"A","6":"2024-08-15"},{"1":"1009930036","2":"1","3":"50086894","4":"CAFE ZAIYA (Inside Kinokuniya Book Store)","5":"A","6":"2023-10-06"},{"1":"1009930036","2":"1","3":"50146160","4":"PRET A MANGER","5":"Z","6":"2025-07-17"},{"1":"1009930036","2":"1","3":"50146160","4":"PRET A MANGER","5":"A","6":"2024-04-02"},{"1":"1009940001","2":"1","3":"50133170","4":"PINK TACO","5":"A","6":"2023-08-23"},{"1":"1009940001","2":"1","3":"50129370","4":"TIMES SQUARE TOWER CAFE","5":"A","6":"2025-06-27"},{"1":"1009940001","2":"1","3":"50133170","4":"PINK TACO","5":"C","6":"2025-01-09"},{"1":"1009940001","2":"1","3":"50161984","4":"ANGELINA'S BAKERY","5":"A","6":"2025-02-24"},{"1":"1009950033","2":"1","3":"50164294","4":"BANK OF AMERICA TEA BAR","5":"A","6":"2025-05-01"},{"1":"1009950033","2":"1","3":"50164979","4":"AKIN CAFE","5":"A","6":"2025-07-30"},{"1":"1009950033","2":"1","3":"50015097","4":"STEPHEN SONDHEIM THEATRE","5":"A","6":"2023-11-01"},{"1":"1009950033","2":"1","3":"50101452","4":"SMOOTHIE JUICE BAR","5":"A","6":"2025-07-01"},{"1":"1009950033","2":"1","3":"41325827","4":"COMPASS GROUP","5":"A","6":"2024-10-03"},{"1":"1009950033","2":"1","3":"50065601","4":"BURGER & LOBSTER","5":"B","6":"2023-02-22"},{"1":"1009950033","2":"1","3":"41486645","4":"EXECUTIVE DINNING ROOM","5":"A","6":"2024-12-12"},{"1":"1009950033","2":"1","3":"50065601","4":"BURGER & LOBSTER","5":"A","6":"2025-04-22"},{"1":"1009960001","2":"1","3":"41219536","4":"BROOKLYN DINER","5":"A","6":"2024-07-18"},{"1":"1009960001","2":"1","3":"50144371","4":"CARLO'S BAKERY","5":"A","6":"2025-07-18"},{"1":"1009960001","2":"1","3":"50120134","4":"JOLLIBEE","5":"A","6":"2025-07-31"},{"1":"1009960001","2":"1","3":"41031137","4":"STARBUCKS","5":"A","6":"2024-11-22"},{"1":"1009960001","2":"1","3":"50128456","4":"GORDON RAMSEY FISH & CHIPS","5":"A","6":"2024-10-01"},{"1":"1009960054","2":"1","3":"40397780","4":"VIRGIL'S BBQ","5":"A","6":"2024-12-18"},{"1":"1009970001","2":"1","3":"50135336","4":"POPEYES","5":"A","6":"2024-05-14"},{"1":"1009970001","2":"1","3":"50068948","4":"STARBUCKS COFFEE #49550","5":"A","6":"2025-06-18"},{"1":"1009970001","2":"1","3":"50118008","4":"MCDONALD'S","5":"A","6":"2024-07-01"},{"1":"1009970041","2":"1","3":"41505885","4":"BOBBY VAN'S GRILL","5":"A","6":"2023-05-01"},{"1":"1009990029","2":"1","3":"40727750","4":"UTSAV FESTIVE INDIA RESTAURANT","5":"A","6":"2023-10-11"},{"1":"1009990029","2":"1","3":"50015535","4":"STEINBERG CENTER FOR THEATER","5":"A","6":"2023-02-01"},{"1":"1009990048","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010000029","2":"1","3":"50089623","4":"PROPER FOOD","5":"A","6":"2024-07-17"},{"1":"1010000029","2":"1","3":"41238041","4":"ROPES & GRAY CAFE","5":"A","6":"2025-05-01"},{"1":"1010010006","2":"1","3":"50118374","4":"SESSIONS","5":"A","6":"2024-03-06"},{"1":"1010010006","2":"1","3":"50118363","4":"VENUE","5":"A","6":"2023-06-28"},{"1":"1010010006","2":"1","3":"50118373","4":"RT 60","5":"A","6":"2024-09-14"},{"1":"1010010059","2":"1","3":"50084009","4":"ICHIRAN TIMES SQUARE","5":"A","6":"2025-07-16"},{"1":"1010010101","2":"1","3":"50105766","4":"LITTLE ITALY PIZZA","5":"A","6":"2024-06-20"},{"1":"1010010101","2":"1","3":"50168970","4":"LITTLE ITALY PIZZA","5":"N","6":"<NA>"},{"1":"1010060063","2":"1","3":"50128424","4":"P.McDAID'S IRISH PUB","5":"A","6":"2025-08-12"},{"1":"1010060063","2":"1","3":"50141310","4":"CAFE AROMA","5":"A","6":"2025-08-05"},{"1":"1010060063","2":"1","3":"40385873","4":"RAY'S PIZZA","5":"A","6":"2024-02-06"},{"1":"1010067502","2":"1","3":"50068154","4":"HERB N' KITCHEN INSIDE HILTON MIDTOWN","5":"A","6":"2025-05-06"},{"1":"1010067502","2":"1","3":"50068152","4":"NEW YORK HILTON , BANQUET KITCHEN","5":"A","6":"2025-08-15"},{"1":"1010067502","2":"1","3":"50068154","4":"HERB N' KITCHEN INSIDE HILTON MIDTOWN","5":"C","6":"2023-09-22"},{"1":"1010067502","2":"1","3":"50068163","4":"Employee Cafeteria (New York Hilton Midtown)","5":"A","6":"2024-06-17"},{"1":"1010070029","2":"1","3":"50092790","4":"QUALITY BISTRO","5":"A","6":"2024-07-12"},{"1":"1010070029","2":"1","3":"50087268","4":"WAGAMAMA","5":"A","6":"2025-01-30"},{"1":"1010070029","2":"1","3":"50157099","4":"BLUE BOTTLE COFFEE","5":"C","6":"2024-12-13"},{"1":"1010080019","2":"1","3":"50144554","4":"AVO","5":"A","6":"2025-06-30"},{"1":"1010080019","2":"1","3":"40577535","4":"ESTIATORIO MILOS","5":"A","6":"2025-07-09"},{"1":"1010080019","2":"1","3":"41670288","4":"CHOP'T","5":"A","6":"2025-07-25"},{"1":"1010090019","2":"1","3":"50045768","4":"INDIAN ACCENT","5":"A","6":"2023-05-02"},{"1":"1010090019","2":"1","3":"50092107","4":"THOMPSON CENTRAL PARK HOTEL - NEW YORK","5":"B","6":"2025-02-14"},{"1":"1010090019","2":"1","3":"50092105","4":"THOMPSON NEW YORK HOTEL (Burger Joint)","5":"A","6":"2024-12-10"},{"1":"1010090019","2":"1","3":"50092107","4":"THOMPSON CENTRAL PARK HOTEL - NEW YORK","5":"A","6":"2023-03-10"},{"1":"1010100015","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010100023","2":"1","3":"41638918","4":"ANGELO'S PIZZERIA","5":"A","6":"2024-09-09"},{"1":"1010107505","2":"1","3":"41366519","4":"STARBUCKS","5":"A","6":"2024-04-30"},{"1":"1010120029","2":"1","3":"50118421","4":"MARGARITAVILLE","5":"A","6":"2025-08-06"},{"1":"1010120029","2":"1","3":"50110210","4":"License to Chill/Joe Merchant's Coffee & Provisions","5":"A","6":"2024-06-04"},{"1":"1010120029","2":"1","3":"50117654","4":"LANDSHARK BAR & GRILL","5":"A","6":"2025-06-03"},{"1":"1010120029","2":"1","3":"50117652","4":"5 OCLOCK SOMEWHERE","5":"A","6":"2024-10-02"},{"1":"1010127501","2":"1","3":"50075331","4":"N.Y. TIMES GRAB & GO","5":"A","6":"2025-04-29"},{"1":"1010127501","2":"1","3":"41378724","4":"SCHNIPPER'S QUALITY KITCHEN","5":"A","6":"2024-11-25"},{"1":"1010127501","2":"1","3":"41248591","4":"NEW YORK TIMES CAFE","5":"A","6":"2025-02-12"},{"1":"1010127501","2":"1","3":"41275704","4":"COVINGTON & BURLING","5":"A","6":"2024-06-14"},{"1":"1010127501","2":"1","3":"41625945","4":"WOLFGANG'S STEAKHOUSE","5":"A","6":"2024-10-22"},{"1":"1010127501","2":"1","3":"50123383","4":"STARBUCKS","5":"A","6":"2024-07-30"},{"1":"1010127502","2":"1","3":"50106587","4":"CARNEGIE PIZZA","5":"A","6":"2025-01-09"},{"1":"1010140033","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010140058","2":"1","3":"41620314","4":"STAR'S CAFE (WESTIN HOTEL)","5":"A","6":"2023-06-26"},{"1":"1010140058","2":"1","3":"50016388","4":"FOUNDRY KITCHEN & BAR","5":"C","6":"2022-12-28"},{"1":"1010140058","2":"1","3":"50016388","4":"FOUNDRY KITCHEN & BAR","5":"A","6":"2025-02-20"},{"1":"1010140058","2":"1","3":"41620314","4":"STAR'S CAFE (WESTIN HOTEL)","5":"C","6":"2024-12-12"},{"1":"1010140058","2":"1","3":"41017390","4":"EUROPAN CAFE","5":"A","6":"2024-11-22"},{"1":"1010150001","2":"1","3":"40986218","4":"GREEN SYMPHONY","5":"A","6":"2024-04-24"},{"1":"1010150001","2":"1","3":"50077814","4":"FAMOUS FAMIGLIA PIZZERIA","5":"A","6":"2025-05-13"},{"1":"1010150001","2":"1","3":"40986218","4":"GREEN SYMPHONY","5":"Z","6":"2025-07-11"},{"1":"1010150001","2":"1","3":"50095860","4":"THE TIMES EATERY","5":"A","6":"2025-07-01"},{"1":"1010160058","2":"1","3":"40560953","4":"GOLDEN THEATRE","5":"A","6":"2023-11-08"},{"1":"1010170002","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010180018","2":"1","3":"50135115","4":"THE RUM HOUSE","5":"A","6":"2023-11-15"},{"1":"1010180018","2":"1","3":"41379121","4":"EDISON BALLROOM","5":"A","6":"2024-09-10"},{"1":"1010180018","2":"1","3":"50063282","4":"BOND 45 ITALIAN KITCHEN AND BAR","5":"A","6":"2024-12-17"},{"1":"1010180018","2":"1","3":"50071839","4":"FRIEDMANS","5":"A","6":"2025-04-16"},{"1":"1010187501","2":"1","3":"50071921","4":"W - TIMES SQUARE (EMPLOYEE DINING)","5":"A","6":"2024-07-23"},{"1":"1010187501","2":"1","3":"40865946","4":"BLUE FIN","5":"A","6":"2022-11-15"},{"1":"1010187501","2":"1","3":"50051612","4":"DOS CAMINOS","5":"A","6":"2022-11-17"},{"1":"1010187501","2":"1","3":"50051612","4":"DOS CAMINOS","5":"B","6":"2024-11-27"},{"1":"1010190010","2":"1","3":"50119427","4":"BROOKLYN CHOPHOUSE TIMES SQUARE","5":"A","6":"2024-09-14"},{"1":"1010190055","2":"1","3":"50044184","4":"AN'NAM","5":"A","6":"2024-07-29"},{"1":"1010200036","2":"1","3":"50109770","4":"BURGER MAN","5":"Z","6":"2025-07-01"},{"1":"1010200036","2":"1","3":"50109770","4":"BURGER MAN","5":"A","6":"2024-03-19"},{"1":"1010207501","2":"1","3":"50141732","4":"KIMPTON HOTEL THETA/BAR SPREZZATURA","5":"A","6":"2025-03-20"},{"1":"1010207501","2":"1","3":"50077901","4":"KIMPTON HOTEL THETA","5":"A","6":"2025-03-20"},{"1":"1010220026","2":"1","3":"50055969","4":"GREGORYS COFFEE","5":"A","6":"2023-12-28"},{"1":"1010220026","2":"1","3":"50147179","4":"APPLEBEE'S","5":"A","6":"2024-06-27"},{"1":"1010220026","2":"1","3":"40482600","4":"WINTER GARDEN THEATER","5":"C","6":"2017-07-05"},{"1":"1010220026","2":"1","3":"50171007","4":"APPLEBEE'S","5":"A","6":"2025-07-10"},{"1":"1010220026","2":"1","3":"40482600","4":"WINTER GARDEN THEATER","5":"A","6":"2019-05-16"},{"1":"1010220035","2":"1","3":"50138545","4":"ELLEN'S STARDUST DINER","5":"A","6":"2023-08-17"},{"1":"1010220043","2":"1","3":"50051293","4":"JUICE PRESS","5":"A","6":"2024-07-09"},{"1":"1010220043","2":"1","3":"40845101","4":"AZALEA","5":"A","6":"2024-10-28"},{"1":"1010220043","2":"1","3":"50151969","4":"DIN TAI FUNG","5":"A","6":"2025-08-14"},{"1":"1010220043","2":"1","3":"40761262","4":"CIRCLE IN THE SQUARE THEATRE","5":"A","6":"2019-06-22"},{"1":"1010220043","2":"1","3":"50155977","4":"ROSETTA BAKERY","5":"A","6":"2025-07-08"},{"1":"1010220043","2":"1","3":"40845101","4":"AZALEA","5":"C","6":"2023-08-23"},{"1":"1010220043","2":"1","3":"40483596","4":"GERSHWIN THEATRE","5":"A","6":"2025-05-21"},{"1":"1010220043","2":"1","3":"41606173","4":"ALLIANZ CAFETERIA","5":"A","6":"2024-11-21"},{"1":"1010220101","2":"1","3":"41012907","4":"TOLOACHE","5":"Z","6":"2025-02-20"},{"1":"1010220101","2":"1","3":"41012907","4":"TOLOACHE","5":"A","6":"2022-03-29"},{"1":"1010230051","2":"1","3":"40373500","4":"VICTOR'S CAFE","5":"A","6":"2025-07-23"},{"1":"1010230059","2":"1","3":"40383825","4":"RUSSIAN SAMOVAR","5":"A","6":"2023-04-24"},{"1":"1010230059","2":"1","3":"40383825","4":"RUSSIAN SAMOVAR","5":"Z","6":"2025-05-07"},{"1":"1010257502","2":"1","3":"50008220","4":"KARAOKE DUET","5":"A","6":"2024-06-07"},{"1":"1010260054","2":"1","3":"40513164","4":"MCGEE'S PUB","5":"A","6":"2025-05-21"},{"1":"1010260055","2":"1","3":"50161930","4":"NAYA","5":"A","6":"2025-05-07"},{"1":"1010260055","2":"1","3":"50132847","4":"CHICK-FIL-A 918 8TH AVENUE","5":"A","6":"2024-10-30"},{"1":"1010260055","2":"1","3":"50067743","4":"VIDA VERDE","5":"A","6":"2024-03-21"},{"1":"1010260055","2":"1","3":"50105997","4":"LE PAIN QUOTIDIEN","5":"A","6":"2024-11-12"},{"1":"1010260055","2":"1","3":"50014802","4":"FLIK","5":"A","6":"2024-09-13"},{"1":"1010270006","2":"1","3":"41718215","4":"YAKITORI TOTTO","5":"B","6":"2023-01-07"},{"1":"1010270006","2":"1","3":"50046997","4":"SOBA NOODLE AZUMA","5":"A","6":"2024-03-07"},{"1":"1010270006","2":"1","3":"41718215","4":"YAKITORI TOTTO","5":"Z","6":"2025-01-29"},{"1":"1010270056","2":"1","3":"50152658","4":"BENGAL TIGER","5":"N","6":"<NA>"},{"1":"1010270103","2":"1","3":"50108106","4":"POPEYES LOUISIANA KITCHEN","5":"A","6":"2024-11-06"},{"1":"1010277503","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1010280033","2":"1","3":"40387754","4":"TRATTORIA DELL'ARTE","5":"A","6":"2024-04-24"},{"1":"1010280033","2":"1","3":"41312223","4":"FRESH & CO","5":"A","6":"2024-10-01"},{"1":"1010280033","2":"1","3":"50105771","4":"USA BROOKLYN DELICATESSEN","5":"A","6":"2024-05-03"},{"1":"1010290036","2":"1","3":"50130108","4":"CENTRAL PARK CAFE","5":"P","6":"2023-10-31"},{"1":"1010290036","2":"1","3":"50150742","4":"CITY SCOOP","5":"N","6":"<NA>"},{"1":"1010290036","2":"1","3":"50130108","4":"CENTRAL PARK CAFE","5":"Z","6":"2025-08-11"},{"1":"1010300001","2":"1","3":"41446057","4":"ROBERT","5":"A","6":"2024-01-25"},{"1":"1012570001","2":"1","3":"50043100","4":"AMY'S BREAD (CAFE AT NEW YORK PUBLIC LIBRARY)","5":"A","6":"2024-05-16"},{"1":"1012570001","2":"1","3":"50001262","4":"BRYANT PARK GRILL","5":"A","6":"2024-05-07"},{"1":"1012600001","2":"1","3":"40368313","4":"RED FLAME DINER","5":"A","6":"2025-01-13"},{"1":"1012600024","2":"1","3":"41168754","4":"KELLARI TAVERNA","5":"B","6":"2024-12-18"},{"1":"1012600024","2":"1","3":"41168754","4":"KELLARI TAVERNA","5":"A","6":"2022-09-29"},{"1":"1012600024","2":"1","3":"50139512","4":"BUTTERFLIED CHICKEN","5":"A","6":"2025-07-22"},{"1":"1012600042","2":"1","3":"50016536","4":"STARBUCKS","5":"A","6":"2024-07-18"},{"1":"1012600042","2":"1","3":"50105828","4":"WENDY'S","5":"A","6":"2022-05-03"},{"1":"1012600042","2":"1","3":"50105828","4":"WENDY'S","5":"B","6":"2023-11-28"},{"1":"1012600042","2":"1","3":"50105828","4":"WENDY'S","5":"Z","6":"2025-05-02"},{"1":"1012610042","2":"1","3":"50134689","4":"OMAR'S MEDITERRANEAN CUISINE","5":"N","6":"<NA>"},{"1":"1012610042","2":"1","3":"50087508","4":"MATTO ESPRESSO","5":"A","6":"2024-08-23"},{"1":"1012610052","2":"1","3":"50068736","4":"IPPUDO","5":"A","6":"2024-10-21"},{"1":"1012610054","2":"1","3":"50066417","4":"CHAZZ PALMINTERI ITALIAN RESTAURANT","5":"A","6":"2024-10-03"},{"1":"1012610054","2":"1","3":"50066417","4":"CHAZZ PALMINTERI ITALIAN RESTAURANT","5":"C","6":"2023-02-09"},{"1":"1012617502","2":"1","3":"40825868","4":"KOSHER DELUXE","5":"A","6":"2024-05-30"},{"1":"1012630001","2":"1","3":"50146156","4":"PRET A MANGER","5":"A","6":"2024-08-13"},{"1":"1012630066","2":"1","3":"50057673","4":"YAMA RAMEN","5":"A","6":"2024-12-02"},{"1":"1012637501","2":"1","3":"50008729","4":"GOLDEN HOF/ NY KIMCHI","5":"A","6":"2023-03-08"},{"1":"1012637501","2":"1","3":"50008729","4":"GOLDEN HOF/ NY KIMCHI","5":"Z","6":"2025-07-18"},{"1":"1012640005","2":"1","3":"41696571","4":"THE ROCK CENTER CAFE","5":"A","6":"2025-07-09"},{"1":"1012640005","2":"1","3":"50157104","4":"BLUE BOTTLE COFFEE","5":"A","6":"2024-09-17"},{"1":"1012640005","2":"1","3":"50131347","4":"BREADS BAKERY","5":"A","6":"2025-02-20"},{"1":"1012640005","2":"1","3":"50114459","4":"LODI","5":"A","6":"2025-01-28"},{"1":"1012640005","2":"1","3":"50100947","4":"ALIDORO","5":"A","6":"2025-03-28"},{"1":"1012640005","2":"1","3":"50111559","4":"DOUGH DOUGHNUTS","5":"A","6":"2025-02-13"},{"1":"1012640030","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1012670001","2":"1","3":"50119782","4":"DOS TOROS","5":"A","6":"2024-03-19"},{"1":"1012670001","2":"1","3":"50146394","4":"LINKLATERS","5":"Z","6":"2025-08-14"},{"1":"1012670001","2":"1","3":"50042550","4":"GLOBAL KITCHEN","5":"A","6":"2025-02-18"},{"1":"1012670001","2":"1","3":"40737932","4":"STARBUCKS","5":"A","6":"2025-07-09"},{"1":"1012670001","2":"1","3":"50056957","4":"NEUBERGER BERMAN EDR","5":"A","6":"2024-07-30"},{"1":"1012677501","2":"1","3":"50129736","4":"DUMO51 RESTAURANT ROOF TOP","5":"A","6":"2025-04-09"},{"1":"1012680001","2":"1","3":"50158652","4":"ARCH AMENITIES GROUP","5":"A","6":"2024-12-03"},{"1":"1012680001","2":"1","3":"50072936","4":"NUSRET STEAKHOUSE","5":"A","6":"2024-10-02"},{"1":"1012687501","2":"1","3":"50088573","4":"PROVIDENCE EQUITY","5":"A","6":"2024-09-19"},{"1":"1012687501","2":"1","3":"50004133","4":"FOGO DE CHAO","5":"A","6":"2024-12-04"},{"1":"1012687501","2":"1","3":"50087392","4":"THE VIEW AT CENTERVIEW PARTNERS","5":"A","6":"2025-02-21"},{"1":"1012690020","2":"1","3":"50099300","4":"TERRACE CAFÉ","5":"A","6":"2025-02-12"},{"1":"1012690020","2":"1","3":"50006345","4":"CAFE 2","5":"A","6":"2025-06-25"},{"1":"1012690020","2":"1","3":"41067696","4":"THE MODERN","5":"A","6":"2024-07-09"},{"1":"1012690020","2":"1","3":"50006343","4":"STAFF CAFF","5":"A","6":"2025-03-13"},{"1":"1012700011","2":"1","3":"50150901","4":"NARI","5":"A","6":"2024-08-14"},{"1":"1012700071","2":"1","3":"41303456","4":"BICE CUCINA","5":"B","6":"2023-01-12"},{"1":"1012700071","2":"1","3":"50146134","4":"PRET A MANGER","5":"A","6":"2024-05-01"},{"1":"1012700071","2":"1","3":"50063627","4":"JOE & THE JUICE","5":"A","6":"2024-11-14"},{"1":"1012700071","2":"1","3":"50117281","4":"JUST SALAD","5":"A","6":"2025-01-09"},{"1":"1012707501","2":"1","3":"50117413","4":"WOLFNIGHTS","5":"A","6":"2025-07-30"},{"1":"1012710019","2":"1","3":"50119298","4":"WHITE OLIVE","5":"A","6":"2023-01-29"},{"1":"1012710049","2":"1","3":"41620905","4":"IL TINELLO RISTORANTE","5":"A","6":"2024-10-03"},{"1":"1012710154","2":"1","3":"50101878","4":"DIM SUM PALACE","5":"B","6":"2024-12-30"},{"1":"1012710154","2":"1","3":"50101878","4":"DIM SUM PALACE","5":"A","6":"2023-03-28"},{"1":"1012730001","2":"1","3":"50000207","4":"QUALITY ITALIAN STEAKHOUSE","5":"A","6":"2024-04-25"},{"1":"1012730001","2":"1","3":"50149446","4":"MANGIA 57TH","5":"N","6":"<NA>"},{"1":"1012730071","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1012747504","2":"1","3":"50000233","4":"PALM COURT","5":"A","6":"2024-08-13"},{"1":"1012747504","2":"1","3":"41283714","4":"CPS EVENTS AT THE PLAZA","5":"A","6":"2024-05-29"},{"1":"1012747504","2":"1","3":"50000256","4":"THE CHAMPAGNE BAR / THE ROSE CLUB","5":"A","6":"2025-07-28"},{"1":"1012750014","2":"1","3":"50130182","4":"POKE BOWL","5":"A","6":"2024-09-24"},{"1":"1012750014","2":"1","3":"50117190","4":"DIG","5":"A","6":"2023-06-07"},{"1":"1012750014","2":"1","3":"50117190","4":"DIG","5":"Z","6":"2025-08-07"},{"1":"1012750016","2":"1","3":"50087274","4":"ESSEN","5":"A","6":"2025-06-26"},{"1":"1012750050","2":"1","3":"50137318","4":"SHOGUN OMAKASE","5":"A","6":"2024-12-03"},{"1":"1012760024","2":"1","3":"50069805","4":"HOMEFRONT KITCHEN","5":"Z","6":"2025-06-27"},{"1":"1012760024","2":"1","3":"50069805","4":"HOMEFRONT KITCHEN","5":"A","6":"2023-10-04"},{"1":"1012760999","2":"1","3":"40691569","4":"PERSHING SQUARE CAFE","5":"B","6":"2025-01-29"},{"1":"1012760999","2":"1","3":"40691569","4":"PERSHING SQUARE CAFE","5":"A","6":"2023-03-24"},{"1":"1012770027","2":"1","3":"50107271","4":"OVA CAFE MEZZ","5":"A","6":"2024-07-26"},{"1":"1012770027","2":"1","3":"50112859","4":"SL GREEN REALTY CORP (28 Floor)","5":"A","6":"2025-07-31"},{"1":"1012770027","2":"1","3":"50109132","4":"LE PAVILLON","5":"A","6":"2024-11-20"},{"1":"1012770027","2":"1","3":"50115909","4":"Aprés","5":"A","6":"2025-04-07"},{"1":"1012770027","2":"1","3":"50109149","4":"EPICERIE BOULUD @ OVA","5":"A","6":"2024-11-20"},{"1":"1012770027","2":"1","3":"50131509","4":"CENTURION","5":"A","6":"2023-08-30"},{"1":"1012770027","2":"1","3":"50125400","4":"JOJI","5":"A","6":"2025-06-18"},{"1":"1012790045","2":"1","3":"50045945","4":"SUBWAY","5":"A","6":"2025-05-13"},{"1":"1012790045","2":"1","3":"50019029","4":"AMMOS ESTIATORIO","5":"B","6":"2023-03-01"},{"1":"1012790045","2":"1","3":"50019029","4":"AMMOS ESTIATORIO","5":"A","6":"2024-07-30"},{"1":"1012790065","2":"1","3":"41040849","4":"DISHES","5":"B","6":"2023-02-24"},{"1":"1012790065","2":"1","3":"41040849","4":"DISHES","5":"A","6":"2024-09-05"},{"1":"1012800030","2":"1","3":"41456522","4":"MAGNOLIA BAKERY","5":"A","6":"2025-02-21"},{"1":"1012810062","2":"1","3":"50072907","4":"MILK N' HONEY","5":"Z","6":"2025-08-14"},{"1":"1012810062","2":"1","3":"50048642","4":"GREGORYS COFFEE","5":"A","6":"2025-07-16"},{"1":"1012810062","2":"1","3":"50072907","4":"MILK N' HONEY","5":"A","6":"2024-06-18"},{"1":"1012810069","2":"1","3":"50095369","4":"JOJU","5":"A","6":"2024-11-21"},{"1":"1012810069","2":"1","3":"41150133","4":"BARNES & NOBLE CAFE","5":"A","6":"2024-05-08"},{"1":"1012820021","2":"1","3":"50136686","4":"STARBUCKS","5":"A","6":"2024-09-24"},{"1":"1012820021","2":"1","3":"41682864","4":"JPMC CAFETERIA","5":"A","6":"2023-10-20"},{"1":"1012820021","2":"1","3":"50046086","4":"THE PIERPONT LEADERSHIP CENTER","5":"A","6":"2023-10-20"},{"1":"1012840007","2":"1","3":"50110445","4":"JOE'S HOME OF SOUP DUMPLINGS","5":"C","6":"2023-09-20"},{"1":"1012840007","2":"1","3":"50110445","4":"JOE'S HOME OF SOUP DUMPLINGS","5":"Z","6":"2025-04-23"},{"1":"1012840012","2":"1","3":"40368897","4":"HATSUHANA RESTAURANT","5":"A","6":"2025-05-22"},{"1":"1012840033","2":"1","3":"50165401","4":"Felix Roasting","5":"A","6":"2025-05-01"},{"1":"1012840033","2":"1","3":"50118086","4":"FASANO","5":"A","6":"2024-05-22"},{"1":"1012840055","2":"1","3":"50001855","4":"MANGIA","5":"A","6":"2025-01-21"},{"1":"1012860030","2":"1","3":"50127027","4":"MONTEREY","5":"N","6":"<NA>"},{"1":"1012877502","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1012880006","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1012890045","2":"1","3":"50126034","4":"MONKEY BAR","5":"A","6":"2024-06-27"},{"1":"1012890107","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1012900052","2":"1","3":"50130220","4":"PETITE MAMAN","5":"A","6":"2024-09-16"},{"1":"1012910001","2":"1","3":"50157737","4":"REVIVE","5":"N","6":"<NA>"},{"1":"1012910001","2":"1","3":"50157727","4":"LEO'S","5":"A","6":"2025-04-14"},{"1":"1012910001","2":"1","3":"50015767","4":"THE POLO BAR","5":"A","6":"2024-06-25"},{"1":"1012927501","2":"1","3":"50132816","4":"NERO.LAB CAFE","5":"A","6":"2025-02-14"},{"1":"1012927501","2":"1","3":"40998586","4":"TRUMP BAR","5":"A","6":"2025-03-20"},{"1":"1012927501","2":"1","3":"40998581","4":"TRUMP CAFE & GRILL","5":"A","6":"2025-07-09"},{"1":"1012930063","2":"1","3":"50147804","4":"LIBERTY BAGELS","5":"A","6":"2025-03-20"},{"1":"1012960014","2":"1","3":"50153039","4":"HAPPY TUNA","5":"N","6":"<NA>"},{"1":"1012960014","2":"1","3":"50060598","4":"POKEWORKS (Entrance is on 41st street between Lexington & Park)","5":"A","6":"2024-07-26"},{"1":"1012960014","2":"1","3":"50010172","4":"JUICE GENERATION","5":"A","6":"2025-07-31"},{"1":"1012960014","2":"1","3":"50105096","4":"GREGORY'S COFFEE","5":"A","6":"2024-07-26"},{"1":"1013030001","2":"1","3":"50142442","4":"SKYLINE LOUNGE","5":"A","6":"2024-05-22"},{"1":"1013030001","2":"1","3":"50044559","4":"CAPITAL ONE NYC","5":"A","6":"2025-02-20"},{"1":"1013070001","2":"1","3":"50059995","4":"THE POOL| THE GRILL","5":"A","6":"2024-04-03"},{"1":"1013070001","2":"1","3":"50070575","4":"THE LOBSTER CLUB","5":"A","6":"2024-04-09"},{"1":"1013070001","2":"1","3":"50159176","4":"SAVORY HOSPITALITY","5":"N","6":"<NA>"},{"1":"1013077502","2":"1","3":"50095733","4":"LE JARDINIERE","5":"A","6":"2024-10-23"},{"1":"1013087502","2":"1","3":"50117116","4":"SHAKE SHACK #1340","5":"A","6":"2024-07-11"},{"1":"1013087502","2":"1","3":"50122285","4":"MOELIS & COMPANY KITCHEN","5":"A","6":"2024-07-11"},{"1":"1013087502","2":"1","3":"50122966","4":"INDAY","5":"A","6":"2024-06-25"},{"1":"1013087502","2":"1","3":"50139469","4":"BLUE OWL CAFE","5":"A","6":"2025-01-15"},{"1":"1013087502","2":"1","3":"41225222","4":"DISHES","5":"B","6":"2024-09-03"},{"1":"1013087502","2":"1","3":"41225222","4":"DISHES","5":"C","6":"2025-04-30"},{"1":"1013097502","2":"1","3":"50089200","4":"DUNKIN","5":"A","6":"2024-09-16"},{"1":"1013097502","2":"1","3":"50164643","4":"EIGHTY NINETY TAIWANESE FOOD","5":"A","6":"2025-05-06"},{"1":"1013097502","2":"1","3":"50119660","4":"DOS TOROS","5":"A","6":"2023-12-12"},{"1":"1013097502","2":"1","3":"40977865","4":"BOBBY VAN'S STEAKHOUSE","5":"A","6":"2024-10-30"},{"1":"1013100010","2":"1","3":"NA","4":"NA","5":"NA","6":"<NA>"},{"1":"1013110061","2":"1","3":"50112933","4":"DUNKIN DONUTS","5":"A","6":"2024-11-18"},{"1":"1013137502","2":"1","3":"41137586","4":"UJA FEDERATION","5":"A","6":"2024-06-25"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="section-4" class="level7">
<p class="heading"></p>
<p>Dates can be tricky to work within APIs because we need to know exactly how they are formatted in order to do meaningful things with them. Typically we want to look up how dates are formatted in the API documentation. In this dataset, the dates are formatted as follows: <code>yyyy-mm-ddThh:mm:ss.0000</code> (e.g.&nbsp;2022-11-01T00:00:00.000).</p>
<p>When we know how dates are formatted, there’s often many ways we can subset the data to certain dates. For instance, I can access all of the rows where a date is <code>between('date 1' AND 'date 2')</code>. I can extract the year as an integer from a column using <code>date_extract_y(&lt;date-field&gt;)</code> and then filter to the rows in that year. A full list of data transformations that can be applied is Socrata is available <a href="https://dev.socrata.com/docs/transforms/">here</a>.</p>
</section>
</section>
<section id="question-5" class="level6">
<h6 class="anchored" data-anchor-id="question-5">Question</h6>
<div class="question">
<p>Create an API call to return the unique keys, incident addresses, and created dates for rows with complaint type “Construction Lead Dust” that were created in October 2022. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>    nyc_311 %&gt;% 
      select(unique_key, created_date, incident_address)
      filter(complaint_type == 'Construction Lead Dust' &amp; 
              created_date &gt; '2022-10-01' &amp;     
              created_date &lt; '2022-10-30')</code></pre>
<p>Once you get this working, write a function called <code>get_construction_lead_dust_complaints</code>. This function will take a <code>borough</code> as an argument, and should construct a string URL that will further filter the data to a given borough (hint: you will need the function <code>paste0</code> to construct this string). In your function, read the data frame using <code>read_csv</code> and return the data frame.</p>
<p>I’ve created a vector of three NYC boroughs for you. Iterate your function over this vector, returning the results as a data frame with rows bound. Your resulting data frame should look something like mine below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_construction_lead_dust &lt;- read_csv(&lt;URL HERE!&gt;) </span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># get_construction_lead_dust_complaints &lt;- &lt;FUNCTION HERE!&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>boroughs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"MANHATTAN"</span>, <span class="st">"BROOKLYN"</span>, <span class="st">"BRONX"</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Write code to iterate function here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["unique_key"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["created_date"],"name":[2],"type":["dttm"],"align":["right"]},{"label":["incident_address"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"55835163","2":"2022-10-28 11:40:35","3":"50 MANHATTAN AVENUE"},{"1":"55824585","2":"2022-10-27 14:24:47","3":"1469 LEXINGTON AVENUE"},{"1":"55808069","2":"2022-10-26 17:21:22","3":"40 RIVER ROAD"},{"1":"55812796","2":"2022-10-26 15:36:12","3":"353 WEST   57 STREET"},{"1":"55798645","2":"2022-10-25 12:09:52","3":"325 NORTH END AVENUE"},{"1":"55802228","2":"2022-10-25 12:06:47","3":"325 NORTH END AVENUE"},{"1":"55789472","2":"2022-10-24 14:05:32","3":"332 EAST   19 STREET"},{"1":"55765912","2":"2022-10-21 16:09:33","3":"240 CENTRAL PARK SOUTH"},{"1":"55770956","2":"2022-10-21 15:47:58","3":"240 CENTRAL PARK SOUTH"},{"1":"55744499","2":"2022-10-19 16:05:42","3":"325 NORTH END AVENUE"},{"1":"55743140","2":"2022-10-19 13:53:43","3":"22 EAST   18 STREET"},{"1":"55751365","2":"2022-10-19 08:59:02","3":"13 EAST  124 STREET"},{"1":"55739078","2":"2022-10-18 12:14:38","3":"185 EAST    3 STREET"},{"1":"55732663","2":"2022-10-18 11:37:10","3":"185 EAST    3 STREET"},{"1":"55731387","2":"2022-10-18 10:59:12","3":"185 EAST    3 STREET"},{"1":"55727833","2":"2022-10-17 17:07:52","3":"2405 1 AVENUE"},{"1":"55727832","2":"2022-10-17 16:30:03","3":"13 EAST  124 STREET"},{"1":"55676233","2":"2022-10-12 09:45:48","3":"145 EAST   30 STREET"},{"1":"55682371","2":"2022-10-12 09:23:26","3":"400 WEST   61 STREET"},{"1":"55677420","2":"2022-10-12 09:18:57","3":"466 WASHINGTON STREET"},{"1":"55671310","2":"2022-10-11 10:20:21","3":"366 WEST   30 STREET"},{"1":"55660104","2":"2022-10-10 07:46:10","3":"50 MANHATTAN AVENUE"},{"1":"55633776","2":"2022-10-07 16:59:11","3":"521 WEST  156 STREET"},{"1":"55621980","2":"2022-10-06 14:29:05","3":"612 WEST  137 STREET"},{"1":"55578969","2":"2022-10-01 10:27:25","3":"254 BROOME STREET"},{"1":"55843267","2":"2022-10-29 19:43:38","3":"993 CARROLL STREET"},{"1":"55840936","2":"2022-10-29 18:10:10","3":"376 GREENE AVENUE"},{"1":"55837493","2":"2022-10-29 13:15:35","3":"2046 BATH AVENUE"},{"1":"55819801","2":"2022-10-27 14:14:26","3":"1650 OCEAN AVENUE"},{"1":"55816359","2":"2022-10-27 11:43:04","3":"336 STARR STREET"},{"1":"55822192","2":"2022-10-27 07:11:59","3":"1647 STERLING PLACE"},{"1":"55812795","2":"2022-10-26 16:11:35","3":"920 ASHFORD STREET"},{"1":"55809247","2":"2022-10-26 14:45:16","3":"687 STERLING PLACE"},{"1":"55799840","2":"2022-10-25 12:56:51","3":"1647 STERLING PLACE"},{"1":"55797465","2":"2022-10-25 10:52:36","3":"1647 STERLING PLACE"},{"1":"55796359","2":"2022-10-24 11:23:26","3":"181 HARMAN STREET"},{"1":"55787193","2":"2022-10-23 23:26:13","3":"120 GROVE STREET"},{"1":"55756763","2":"2022-10-20 10:28:35","3":"295 COZINE AVENUE"},{"1":"55737794","2":"2022-10-18 13:59:27","3":"26 ADELPHI STREET"},{"1":"55733922","2":"2022-10-18 11:29:58","3":"191 SULLIVAN PLACE"},{"1":"55732664","2":"2022-10-18 09:33:47","3":"375 EAST   28 STREET"},{"1":"55726700","2":"2022-10-17 10:13:53","3":"191 SULLIVAN PLACE"},{"1":"55718874","2":"2022-10-16 17:01:13","3":"191 SULLIVAN PLACE"},{"1":"55705112","2":"2022-10-15 04:00:53","3":"2943 WEST   20 STREET"},{"1":"55651430","2":"2022-10-09 15:13:01","3":"18 BERGEN BEACH PLACE"},{"1":"55657228","2":"2022-10-09 13:32:33","3":"158 EAST   46 STREET"},{"1":"55628495","2":"2022-10-06 15:44:49","3":"336 STARR STREET"},{"1":"55615688","2":"2022-10-05 13:28:38","3":"2402 82 STREET"},{"1":"55596231","2":"2022-10-03 15:56:54","3":"800 GREENWOOD AVENUE"},{"1":"55837492","2":"2022-10-29 23:28:37","3":"735 MACE AVENUE"},{"1":"55832583","2":"2022-10-28 23:46:25","3":"963 WOODYCREST AVENUE"},{"1":"55832584","2":"2022-10-28 05:34:46","3":"963 WOODYCREST AVENUE"},{"1":"55816358","2":"2022-10-27 18:45:15","3":"862 BECK STREET"},{"1":"55810438","2":"2022-10-26 20:57:17","3":"2395 VALENTINE AVENUE"},{"1":"55806860","2":"2022-10-26 10:41:22","3":"3245 PERRY AVENUE"},{"1":"55808068","2":"2022-10-26 02:14:04","3":"963 WOODYCREST AVENUE"},{"1":"55787192","2":"2022-10-23 16:47:53","3":"963 WOODYCREST AVENUE"},{"1":"55776484","2":"2022-10-22 23:31:54","3":"963 WOODCREST AVENUE"},{"1":"55777502","2":"2022-10-22 08:57:14","3":"1115 VIRGINIA AVENUE"},{"1":"55776485","2":"2022-10-22 03:03:21","3":"963 WOODYCREST AVENUE"},{"1":"55752728","2":"2022-10-20 17:36:22","3":"1184 NELSON AVENUE"},{"1":"55748595","2":"2022-10-19 10:05:49","3":"1025 GERARD AVENUE"},{"1":"55728994","2":"2022-10-17 12:48:43","3":"305 EAST  170 STREET"},{"1":"55719988","2":"2022-10-16 22:12:31","3":"3555 BRUCKNER BOULEVARD"},{"1":"55709214","2":"2022-10-16 00:52:33","3":"963 WOODYCREST AVENUE"},{"1":"55696269","2":"2022-10-14 22:04:52","3":"963 WOODYCREST AVENUE"},{"1":"55700120","2":"2022-10-14 12:39:57","3":"340 EAST  151 STREET"},{"1":"55681152","2":"2022-10-12 13:31:52","3":"963 WOODYCREST AVENUE"},{"1":"55670053","2":"2022-10-11 13:36:10","3":"1534 SELWYN AVENUE"},{"1":"55673726","2":"2022-10-11 11:25:38","3":"1879 CLINTON AVENUE"},{"1":"55663979","2":"2022-10-10 21:38:49","3":"957 WOODYCREST AVENUE"},{"1":"55659143","2":"2022-10-10 05:31:17","3":"963 WOODYCREST AVENUE"},{"1":"55650474","2":"2022-10-09 04:34:48","3":"963 WOODYCREST AVENUE"},{"1":"55648476","2":"2022-10-08 22:17:35","3":"963 WOODYCREST AVENUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="section-5" class="level7">
<p class="heading"></p>
</section>
</section>
</section>
<section id="group" class="level3">
<h3 class="anchored" data-anchor-id="group"><code>$group</code></h3>
<p>Aggregating in <code>SoQL</code> calls looks and feels a bit different than it does in <code>dplyr</code>. The <code>$group=</code> parameter indicates that we wish to return a result grouped by a particular field. However, instead of using a verb like <code>summarize</code> to indicate that we want to perform a calculation in each group, we are going to specify what aggregated columns we want returned to us via the <code>$select</code> parameter.</p>
<p>So let’s say I want to return counts of the number of rows assigned to each <code>agency</code> in this dataset. In other words, I want a dataframe with a column listing the agency and a column listing the counts of rows with that agency listed.</p>
<p>First, I would set <code>$select=agency,count(*)</code>. Here <code>*</code> refers to everything (i.e.&nbsp;all rows), and <code>count()</code> is a function indicating that we should count all rows. After indicating what columns I want back, then I would set <code>$group=agency</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>nyc_311_agency <span class="ot">&lt;-</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="st">"https://data.cityofnewyork.us/resource/erm2-nwe9.csv?$select=agency,count(*)&amp;$group=agency"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nyc_311_agency)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["agency"],"name":[1],"type":["chr"],"align":["left"]},{"label":["count"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"3-1-1","2":"20595"},{"1":"ACS","2":"1220"},{"1":"CEO","2":"5"},{"1":"COIB","2":"20"},{"1":"DCAS","2":"1873"},{"1":"DCP","2":"89"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="question-6" class="level6">
<h6 class="anchored" data-anchor-id="question-6">Question</h6>
<div class="question">
<p>Create an API call to return the counts per descriptor and borough for the complaint type “Consumer Complaint.” In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>    nyc_311 %&gt;% 
      filter(complaint_type == "Consumer Complaint") %&gt;% 
      group_by(descriptor,borough) %&gt;% 
      summarize(count = n())
</code></pre>
<p>Pivot the data so that there are separate columns indicating counts for each borough in the dataset. Your data frame will look something like mine below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_consumer_complaint &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["descriptor"],"name":[1],"type":["chr"],"align":["left"]},{"label":["BROOKLYN"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["MANHATTAN"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["QUEENS"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["BRONX"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["STATEN ISLAND"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Unspecified"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"Advance Fee","2":"1","3":"5","4":"8","5":"NA","6":"NA","7":"NA"},{"1":"Airline","2":"1","3":"NA","4":"4","5":"NA","6":"NA","7":"NA"},{"1":"Amusement Ride","2":"12","3":"4","4":"8","5":"2","6":"5","7":"NA"},{"1":"Arcade","2":"22","3":"13","4":"3","5":"9","6":"2","7":"NA"},{"1":"Art Supply Store","2":"9","3":"23","4":"2","5":"NA","6":"1","7":"NA"},{"1":"Auction House/Auctioneer","2":"8","3":"17","4":"16","5":"5","6":"1","7":"NA"},{"1":"Auction House or Auctioneer","2":"8","3":"4","4":"8","5":"1","6":"1","7":"NA"},{"1":"Automated Employment Decision Tool Use","2":"1","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"Bail Bond Agent","2":"2","3":"6","4":"6","5":"4","6":"NA","7":"NA"},{"1":"Barber Shop, Beauty Salon, or Nail Salon","2":"191","3":"174","4":"197","5":"93","6":"29","7":"2"},{"1":"Billing Dispute","2":"1050","3":"173","4":"1249","5":"547","6":"155","7":"896"},{"1":"Bingo Hall","2":"4","3":"4","4":"14","5":"5","6":"3","7":"NA"},{"1":"Bodega, Deli, or Convenience Store","2":"1035","3":"902","4":"636","5":"572","6":"107","7":"NA"},{"1":"Bodega/Deli/Supermarket","2":"2138","3":"1533","4":"1736","5":"1567","6":"274","7":"4"},{"1":"Booting Company","2":"110","3":"42","4":"318","5":"51","6":"7","7":"1"},{"1":"Cabaret","2":"1","3":"1","4":"1","5":"2","6":"NA","7":"NA"},{"1":"Cancellation/Closure without Notice","2":"NA","3":"1","4":"NA","5":"1","6":"1","7":"NA"},{"1":"Car Dealer - Used","2":"902","3":"110","4":"1177","5":"940","6":"144","7":"5"},{"1":"Car Not Available","2":"82","3":"316","4":"73","5":"77","6":"7","7":"2"},{"1":"Carpet and Flooring Business","2":"11","3":"6","4":"5","5":"7","6":"NA","7":"NA"},{"1":"Car Rental","2":"256","3":"200","4":"333","5":"84","6":"14","7":"NA"},{"1":"Cars Parked on Sidewalk/Street","2":"1256","3":"128","4":"1186","5":"715","6":"176","7":"2"},{"1":"Car Wash","2":"688","3":"655","4":"1141","5":"1741","6":"64","7":"5"},{"1":"Catering Establishment","2":"16","3":"8","4":"8","5":"3","6":"NA","7":"NA"},{"1":"Cell Phone Store","2":"371","3":"289","4":"337","5":"282","6":"38","7":"5"},{"1":"Cigarette Sale to Minor","2":"1276","3":"588","4":"785","5":"825","6":"252","7":"11"},{"1":"Closed without Notice","2":"255","3":"363","4":"197","5":"152","6":"11","7":"3"},{"1":"Clothing Damage","2":"362","3":"362","4":"233","5":"69","6":"13","7":"1"},{"1":"Clothing, Shoe, or Accessories Store","2":"195","3":"433","4":"119","5":"84","6":"14","7":"NA"},{"1":"Construction Labor Provider","2":"45","3":"25","4":"44","5":"11","6":"10","7":"NA"},{"1":"Contact Sign Not Posted","2":"255","3":"113","4":"244","5":"156","6":"21","7":"2"},{"1":"Contract Dispute","2":"1934","3":"1583","4":"2329","5":"1129","6":"220","7":"221"},{"1":"Credit Card Limitations Not Posted","2":"194","3":"195","4":"188","5":"100","6":"29","7":"NA"},{"1":"Damaged/Defective Goods","2":"4387","3":"2468","4":"3371","5":"2454","6":"398","7":"110"},{"1":"Damaged/Defective Parts","2":"119","3":"56","4":"94","5":"81","6":"9","7":"28"},{"1":"Damaged Vehicle","2":"1436","3":"1422","4":"1713","5":"965","6":"160","7":"51"},{"1":"Dealer in Products for the Disabled","2":"16","3":"18","4":"7","5":"8","6":"2","7":"17"},{"1":"Debt Collection Agency","2":"45","3":"85","4":"34","5":"23","6":"10","7":"497"},{"1":"Debt Not Owed","2":"49","3":"126","4":"55","5":"16","6":"18","7":"1259"},{"1":"Demand for Cash","2":"378","3":"19","4":"465","5":"219","6":"67","7":"25"},{"1":"Department Store or Megastore","2":"143","3":"84","4":"103","5":"78","6":"16","7":"NA"},{"1":"Disabled Device Dealer","2":"17","3":"19","4":"6","5":"5","6":"5","7":"7"},{"1":"Disclosure Not Provided","2":"1","3":"NA","4":"NA","5":"2","6":"NA","7":"NA"},{"1":"Dissatisfaction with Provider","2":"162","3":"249","4":"110","5":"79","6":"27","7":"10"},{"1":"Documents Not Returned","2":"2","3":"10","4":"7","5":"2","6":"NA","7":"NA"},{"1":"Documents/Paperwork Missing","2":"8","3":"16","4":"11","5":"1","6":"NA","7":"NA"},{"1":"Domestic Employee","2":"17","3":"11","4":"13","5":"8","6":"4","7":"NA"},{"1":"Domestic Worker Employment Agency","2":"1","3":"1","4":"1","5":"1","6":"1","7":"NA"},{"1":"Door Open with Air Conditioning On","2":"236","3":"2241","4":"160","5":"50","6":"9","7":"5"},{"1":"Door to Door Sales","2":"23","3":"24","4":"24","5":"15","6":"6","7":"1"},{"1":"Drug Store or Pharmacy","2":"257","3":"313","4":"190","5":"179","6":"25","7":"NA"},{"1":"Dry Cleaner","2":"357","3":"333","4":"209","5":"80","6":"22","7":"1"},{"1":"E-Cigarette Sales","2":"227","3":"184","4":"199","5":"95","6":"66","7":"NA"},{"1":"Electronics or Appliance Repair","2":"63","3":"29","4":"33","5":"39","6":"10","7":"16"},{"1":"Electronics Repair Store","2":"113","3":"72","4":"97","5":"49","6":"16","7":"46"},{"1":"Electronics Store","2":"570","3":"387","4":"412","5":"372","6":"45","7":"3"},{"1":"Employment Agency","2":"181","3":"325","4":"329","5":"117","6":"12","7":"1"},{"1":"Entertainment Venue","2":"1","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"Exchange/Refund/Return","2":"6356","3":"5744","4":"6470","5":"3813","6":"539","7":"218"},{"1":"Extra Parts","2":"5","3":"4","4":"4","5":"2","6":"1","7":"3"},{"1":"False Advertising","2":"3724","3":"4899","4":"3390","5":"2398","6":"363","7":"164"},{"1":"Financial Education Network","2":"1","3":"1","4":"2","5":"NA","6":"NA","7":"NA"},{"1":"For-profit College","2":"30","3":"117","4":"34","5":"9","6":"8","7":"1"},{"1":"For-Profit College or University","2":"26","3":"31","4":"7","5":"5","6":"3","7":"NA"},{"1":"Funeral Home","2":"42","3":"44","4":"16","5":"101","6":"5","7":"1"},{"1":"Furniture Store","2":"683","3":"336","4":"788","5":"789","6":"63","7":"4"},{"1":"Games of Chance","2":"12","3":"3","4":"21","5":"10","6":"7","7":"NA"},{"1":"Gaming Cafe","2":"10","3":"9","4":"13","5":"2","6":"1","7":"NA"},{"1":"Garage or Parking Lot","2":"313","3":"938","4":"546","5":"324","6":"44","7":"1"},{"1":"Garage/Parking Lot","2":"505","3":"1841","4":"654","5":"565","6":"51","7":"3"},{"1":"Gas Station","2":"518","3":"124","4":"432","5":"217","6":"109","7":"1"},{"1":"Gas Station Convenience Store","2":"64","3":"28","4":"95","5":"19","6":"18","7":"NA"},{"1":"Gas Station Pumps","2":"151","3":"34","4":"142","5":"93","6":"24","7":"NA"},{"1":"Gender Pricing","2":"77","3":"68","4":"65","5":"35","6":"3","7":"1"},{"1":"General Vendor","2":"31","3":"59","4":"34","5":"11","6":"2","7":"NA"},{"1":"Gift, Novelty, or Souvenir Store","2":"18","3":"117","4":"12","5":"2","6":"2","7":"NA"},{"1":"Going Out of Business","2":"3","3":"5","4":"3","5":"2","6":"1","7":"NA"},{"1":"Grocery Store","2":"6","3":"9","4":"2","5":"5","6":"NA","7":"NA"},{"1":"Harassment","2":"73","3":"129","4":"69","5":"32","6":"26","7":"1518"},{"1":"Hardware Store","2":"34","3":"36","4":"31","5":"20","6":"8","7":"NA"},{"1":"High Interest Loan","2":"2","3":"2","4":"1","5":"1","6":"NA","7":"NA"},{"1":"High Pressure Sales","2":"6","3":"3","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"High Pressure to Take on Loan/Debt","2":"18","3":"104","4":"13","5":"2","6":"3","7":"14"},{"1":"Home Appliance Store","2":"90","3":"43","4":"39","5":"58","6":"6","7":"NA"},{"1":"Home Heating Oil Company","2":"58","3":"7","4":"97","5":"26","6":"15","7":"NA"},{"1":"Home Improvement Contractor","2":"976","3":"320","4":"1189","5":"397","6":"295","7":"558"},{"1":"Horse-Drawn Cab","2":"1","3":"40","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"Horse Drawn Carriage","2":"1","3":"47","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"Hotel","2":"128","3":"369","4":"229","5":"44","6":"6","7":"2"},{"1":"Hotel or Motel","2":"86","3":"428","4":"143","5":"47","6":"6","7":"NA"},{"1":"House/Property Damaged","2":"164","3":"47","4":"218","5":"43","6":"70","7":"117"},{"1":"ID Requirement Not Posted","2":"57","3":"53","4":"40","5":"18","6":"NA","7":"1"},{"1":"Illegal Tow","2":"976","3":"106","4":"979","5":"635","6":"198","7":"58"},{"1":"Illegal/Unfair Booting","2":"93","3":"26","4":"61","5":"28","6":"6","7":"8"},{"1":"Immigration Services","2":"15","3":"23","4":"28","5":"11","6":"6","7":"NA"},{"1":"Immigration Services Provider","2":"10","3":"22","4":"20","5":"8","6":"NA","7":"NA"},{"1":"Improper Sale of Items","2":"61","3":"53","4":"51","5":"44","6":"14","7":"1"},{"1":"Inaccurate Meter","2":"12","3":"2","4":"12","5":"18","6":"2","7":"NA"},{"1":"Injury/Safety","2":"32","3":"7","4":"6","5":"1","6":"3","7":"1"},{"1":"Installation/Work Quality","2":"619","3":"123","4":"696","5":"205","6":"220","7":"448"},{"1":"Jewelry Appraiser","2":"8","3":"17","4":"10","5":"11","6":"NA","7":"NA"},{"1":"Jewelry Store","2":"43","3":"67","4":"31","5":"25","6":"2","7":"NA"},{"1":"Labor violation","2":"78","3":"152","4":"59","5":"34","6":"1","7":"NA"},{"1":"Labor Violation","2":"4","3":"4","4":"13","5":"7","6":"4","7":"1"},{"1":"Lack of Safety Equipment","2":"NA","3":"42","4":"2","5":"NA","6":"NA","7":"NA"},{"1":"Landlord or Real Estate Agent","2":"48","3":"38","4":"37","5":"17","6":"3","7":"NA"},{"1":"Laundromat","2":"354","3":"117","4":"245","5":"219","6":"20","7":"NA"},{"1":"Laundry","2":"554","3":"263","4":"461","5":"338","6":"41","7":"2"},{"1":"Layaway Terms Not Provided","2":"60","3":"40","4":"37","5":"43","6":"1","7":"NA"},{"1":"Loan Offer","2":"2","3":"1","4":"NA","5":"NA","6":"NA","7":"4"},{"1":"Locksmith","2":"117","3":"87","4":"64","5":"33","6":"4","7":"20"},{"1":"Lost Property","2":"39","3":"13","4":"24","5":"50","6":"2","7":"NA"},{"1":"Mail Order","2":"107","3":"104","4":"70","5":"77","6":"9","7":"NA"},{"1":"Mandatory Tip","2":"135","3":"422","4":"171","5":"42","6":"4","7":"NA"},{"1":"Micromobility Device Store","2":"1","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"Minor Access","2":"4","3":"NA","4":"3","5":"NA","6":"1","7":"NA"},{"1":"Minor Present School Hours","2":"4","3":"NA","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"Misleading Appraisal","2":"17","3":"25","4":"11","5":"14","6":"NA","7":"NA"},{"1":"Missing Complaint Sign","2":"NA","3":"19","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"Mobile Food Vendor","2":"1453","3":"5388","4":"925","5":"309","6":"42","7":"2"},{"1":"Movie Theater","2":"7","3":"14","4":"7","5":"1","6":"1","7":"NA"},{"1":"Moving Company","2":"49","3":"15","4":"20","5":"18","6":"2","7":"1"},{"1":"Newsstand","2":"21","3":"118","4":"32","5":"18","6":"2","7":"2"},{"1":"No Bill of Rights","2":"2","3":"5","4":"2","5":"NA","6":"NA","7":"NA"},{"1":"Non-Delivery Goods/Services","2":"5571","3":"3957","4":"5207","5":"3026","6":"650","7":"486"},{"1":"Non-Delivery of Papers","2":"48","3":"64","4":"47","5":"27","6":"19","7":"73"},{"1":"Non-Disclosure of Fees","2":"70","3":"64","4":"39","5":"49","6":"6","7":"5"},{"1":"Non-Disclosure of Ownership","2":"2","3":"1","4":"NA","5":"NA","6":"1","7":"NA"},{"1":"No or Defective Headphones","2":"NA","3":"25","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"No Statement of Job Conditions","2":"2","3":"5","4":"4","5":"1","6":"NA","7":"NA"},{"1":"Office Supply or Stationery Store","2":"14","3":"8","4":"4","5":"3","6":"NA","7":"NA"},{"1":"Online or Mail Order","2":"37","3":"72","4":"34","5":"29","6":"7","7":"NA"},{"1":"Other","2":"835","3":"929","4":"790","5":"488","6":"119","7":"4"},{"1":"Other Store (Non-Food)","2":"1609","3":"1864","4":"822","5":"568","6":"82","7":"1"},{"1":"Over Capacity","2":"228","3":"588","4":"274","5":"197","6":"18","7":"NA"},{"1":"Overcharge","2":"4441","3":"5877","4":"4231","5":"2447","6":"573","7":"72"},{"1":"Paid in Advance","2":"58","3":"567","4":"230","5":"29","6":"1","7":"NA"},{"1":"Pawnbroker","2":"37","3":"18","4":"9","5":"25","6":"NA","7":"1"},{"1":"Pawn Broker","2":"35","3":"34","4":"26","5":"70","6":"6","7":"NA"},{"1":"Pedicab","2":"57","3":"557","4":"26","5":"7","6":"2","7":"1"},{"1":"Pest Control Services","2":"NA","3":"NA","4":"NA","5":"NA","6":"1","7":"NA"},{"1":"Pet Store","2":"11","3":"26","4":"12","5":"9","6":"1","7":"NA"},{"1":"Photographic Services","2":"NA","3":"1","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"Pool/Billiard Hall","2":"7","3":"3","4":"2","5":"4","6":"1","7":"NA"},{"1":"Pool or Billiard Room","2":"3","3":"1","4":"2","5":"NA","6":"1","7":"NA"},{"1":"Pregnancy Services Center","2":"8","3":"6","4":"2","5":"6","6":"NA","7":"NA"},{"1":"Price Not Posted","2":"479","3":"629","4":"352","5":"198","6":"46","7":"NA"},{"1":"Printing Services","2":"1","3":"1","4":"1","5":"NA","6":"1","7":"NA"},{"1":"Process Server","2":"52","3":"46","4":"46","5":"13","6":"10","7":"3"},{"1":"Professional Photographer","2":"1","3":"1","4":"2","5":"NA","6":"1","7":"NA"},{"1":"Prohibited Item Sale to Minor","2":"174","3":"88","4":"132","5":"75","6":"34","7":"1"},{"1":"Public Event","2":"NA","3":"7","4":"NA","5":"4","6":"NA","7":"NA"},{"1":"Public Event Seating","2":"7","3":"10","4":"4","5":"1","6":"NA","7":"NA"},{"1":"Publishing Company","2":"NA","3":"3","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"Rates Not Posted","2":"77","3":"286","4":"64","5":"69","6":"6","7":"NA"},{"1":"Receipt Incomplete/Not Given","2":"512","3":"468","4":"509","5":"237","6":"61","7":"7"},{"1":"Rental Hall","2":"102","3":"24","4":"98","5":"31","6":"9","7":"NA"},{"1":"Required Signage Not Posted","2":"42","3":"50","4":"28","5":"23","6":"20","7":"1"},{"1":"Residential Rental Agency","2":"77","3":"84","4":"39","5":"23","6":"3","7":"NA"},{"1":"Restaurant","2":"932","3":"1503","4":"1059","5":"424","6":"92","7":"2"},{"1":"Retail Store","2":"10273","3":"7894","4":"7995","5":"6264","6":"1114","7":"30"},{"1":"Returns Not Filed","2":"151","3":"61","4":"96","5":"110","6":"11","7":"1"},{"1":"Sales Promotion","2":"4","3":"2","4":"5","5":"NA","6":"NA","7":"NA"},{"1":"Satisfaction with Provider","2":"1","3":"NA","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"Scale Dealer or Repairer","2":"9","3":"2","4":"15","5":"7","6":"3","7":"NA"},{"1":"Scale Dealer/Repairer","2":"59","3":"42","4":"61","5":"25","6":"6","7":"NA"},{"1":"Scale Inaccurate","2":"12","3":"10","4":"13","5":"4","6":"NA","7":"NA"},{"1":"Scale Inaccurate/Broken","2":"294","3":"271","4":"204","5":"98","6":"21","7":"2"},{"1":"Scrap Metal Processor","2":"35","3":"3","4":"54","5":"49","6":"11","7":"NA"},{"1":"Secondhand Dealer","2":"61","3":"136","4":"62","5":"62","6":"14","7":"NA"},{"1":"Shipping Company","2":"66","3":"51","4":"79","5":"49","6":"3","7":"NA"},{"1":"Sidewalk Blocked","2":"1808","3":"3629","4":"1399","5":"384","6":"88","7":"14"},{"1":"Sidewalk Cafe","2":"486","3":"984","4":"495","5":"107","6":"51","7":"8"},{"1":"Smoking, Cigar, or Vape Store","2":"99","3":"113","4":"58","5":"37","6":"28","7":"NA"},{"1":"Spanish Speaking Business","2":"2","3":"1","4":"1","5":"3","6":"NA","7":"NA"},{"1":"Spanish Transaction","2":"3","3":"3","4":"NA","5":"1","6":"NA","7":"NA"},{"1":"Stoop Line","2":"631","3":"434","4":"665","5":"184","6":"19","7":"4"},{"1":"Stoop Line Stand","2":"575","3":"418","4":"553","5":"435","6":"35","7":"2"},{"1":"Storage Warehouse","2":"263","3":"110","4":"188","5":"184","6":"31","7":"1"},{"1":"Street Fair Vendor","2":"407","3":"624","4":"360","5":"152","6":"18","7":"2"},{"1":"Supermarket or Grocery Store","2":"812","3":"609","4":"643","5":"485","6":"50","7":"4"},{"1":"Tax Preparation Services","2":"45","3":"28","4":"41","5":"41","6":"6","7":"NA"},{"1":"Tax Preparer","2":"188","3":"105","4":"120","5":"191","6":"11","7":"1"},{"1":"Third-Party Food Delivery Service","2":"61","3":"100","4":"52","5":"45","6":"10","7":"NA"},{"1":"Ticket Broker","2":"14","3":"119","4":"7","5":"3","6":"3","7":"NA"},{"1":"Ticket Seller","2":"23","3":"101","4":"8","5":"3","6":"4","7":"NA"},{"1":"Time Insufficient","2":"1","3":"35","4":"1","5":"NA","6":"NA","7":"NA"},{"1":"Tobacco Sales","2":"913","3":"596","4":"517","5":"406","6":"152","7":"NA"},{"1":"Tour Bus","2":"14","3":"58","4":"11","5":"2","6":"1","7":"NA"},{"1":"Tour Company","2":"33","3":"150","4":"18","5":"5","6":"9","7":"1"},{"1":"Tour Guide","2":"26","3":"131","4":"7","5":"5","6":"1","7":"1"},{"1":"Tow Truck Company","2":"2305","3":"112","4":"2015","5":"1110","6":"280","7":"6"},{"1":"Toy Gun Sale","2":"10","3":"5","4":"5","5":"2","6":"NA","7":"NA"},{"1":"Travel Agency","2":"135","3":"168","4":"204","5":"31","6":"6","7":"1"},{"1":"Unlicensed","2":"3090","3":"2627","4":"2855","5":"1589","6":"495","7":"246"},{"1":"Unrequested Services Provided","2":"16","3":"9","4":"4","5":"6","6":"4","7":"NA"},{"1":"Used Car Dealer","2":"362","3":"43","4":"576","5":"372","6":"83","7":"1"},{"1":"Used Goods Dealer","2":"54","3":"25","4":"68","5":"30","6":"9","7":"NA"},{"1":"Used Gun Dealer","2":"2","3":"1","4":"NA","5":"4","6":"NA","7":"NA"},{"1":"Utility Company","2":"1","3":"2","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"Vendor","2":"2237","3":"3087","4":"1443","5":"797","6":"84","7":"2"},{"1":"Vocational or Trade School","2":"3","3":"6","4":"5","5":"1","6":"1","7":"NA"},{"1":"Wholesale Food Market","2":"27","3":"12","4":"13","5":"6","6":"2","7":"NA"},{"1":"NA","2":"NA","3":"1","4":"NA","5":"NA","6":"NA","7":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="section-6" class="level7">
<p class="heading"></p>
<p><code>count(*)</code> is function <code>SoQL</code> function. A full list of similar summary functions in <code>SoQL</code> is available <a href="https://dev.socrata.com/docs/functions/#,">here</a>. Another useful <code>SoQL</code> function is <code>distinct</code>, which can be used to return the distinct values in a column. When we use <code>distinct</code> in conjunction with <code>count</code>, we can count the distinct values in a column (e.g.&nbsp;<code>count(distinct%20&lt;field&gt;)</code>).</p>
</section>
</section>
<section id="question-7" class="level6">
<h6 class="anchored" data-anchor-id="question-7">Question</h6>
<div class="question">
<p>Create an API call to return the counts of complaints with the descriptor “Gender Pricing” in each borough, along with the count of distinct incident addresses for these complaints in each borough. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>    nyc_311 %&gt;% 
      filter(complaint_type == "Gender Pricing") %&gt;% 
      group_by(borough) %&gt;% 
      summarize(count = n(),
                count_distinct_incident_address = length(unique(incident_address)) )
</code></pre>
<p>Pivot and plot the data to match my plot below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_gender_pricing &lt;- read_csv(&lt;URL HERE!&gt;)</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-document="solutions">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="review_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="section-7" class="level7">
<p class="heading"></p>
</section>
</section>
</section>
<section id="having" class="level3">
<h3 class="anchored" data-anchor-id="having"><code>$having</code></h3>
<p>Once we’ve aggregated data in a <code>SoQL</code> query, we no longer use <code>$where=</code> to filter it. Instead, we use <code>$having=</code> to filter aggregate data. For example, in the above call, I could tack on <code>...&amp;having=count&gt;10</code> to return the rows from my aggregated data where the count was greater than 10.</p>
<section id="question-8" class="level6">
<h6 class="anchored" data-anchor-id="question-8">Question</h6>
<div class="question">
<p>Create an API call to return the latitude, longitude, and counts per BBL for the complaint type “HEAT/HOT WATER.” Filter out rows where the BBL is ‘0000000000’, and sort the counts in descending order. Filter the results to the rows where the count of heat and hot water complaints is greater than 1000. In other words, translate the following <code>dplyr</code> call into a <code>SoSQL</code> query:</p>
<pre><code>    nyc_311 %&gt;%
      filter(complaint_type == "HEAT/HOT WATER" &amp; 
              bbl != "0000000000") %&gt;% 
      group_by(bbl, latitude, longitude) %&gt;% 
      summarize(count = n()) %&gt;% 
      arrange(desc(count)) %&gt;%
      ungroup() %&gt;%
      filter(count &gt; 1000)</code></pre>
<p>Convert the result into a geom object, create a palette using the <code>counts</code> variable, and map the points via leaflet to match my map below.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code below!</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nyc_311_heat_counts &lt;- read_csv(&lt;URL HERE!&gt;) |&gt; st_as_sf()</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Palette here!</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Map here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="section-8" class="level7">
<p class="heading"></p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ethical Considerations
</div>
</div>
<div class="callout-body-container callout-body">
<p>As noted in the introductory paragraphs, 311 can both over-count and under-count certain quality of life concerns in New York City. It can be a valuable tool for activists trying to draw attention to certain issues, and it can also be weaponized against certain communities when complaints are issued against an establishment in a discriminatory way. Despite this, the data is often used by city decision-makers to determine where to prioritize resources and services. What is the value of 311 data? When and wow should it be used?</p>
</div>
</div>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>